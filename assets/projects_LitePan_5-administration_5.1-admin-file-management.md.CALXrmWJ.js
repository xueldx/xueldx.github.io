import{_ as o,C as d,c as n,o as A,a8 as t,b as r,w as a,a as l,G as E,a9 as B}from"./chunks/framework.DW4T_yAZ.js";const F=JSON.parse('{"title":"管理员文件管理","description":"","frontmatter":{},"headers":[],"relativePath":"projects/LitePan/5-administration/5.1-admin-file-management.md","filePath":"projects/LitePan/5-administration/5.1-admin-file-management.md","lastUpdated":1749448992000}'),s={name:"projects/LitePan/5-administration/5.1-admin-file-management.md"};function u(h,e,f,c,m,D){const i=d("Mermaid");return A(),n("div",null,[e[5]||(e[5]=t('<h1 id="管理员文件管理" tabindex="-1">管理员文件管理 <a class="header-anchor" href="#管理员文件管理" aria-label="Permalink to &quot;管理员文件管理&quot;">​</a></h1><blockquote><p><strong>相关源文件</strong></p><ul><li><a href="https://github.com/xueldx/%E4%BC%98%E4%BA%AB%E4%BA%91%E7%9B%98-front/blob/3ffecfa5/src/views/admin/FileList.vue" target="_blank" rel="noreferrer">src/views/admin/FileList.vue</a></li></ul></blockquote><p>本节涵盖了管理员文件管理系统，该系统允许管理员查看、搜索、导航和管理 优享云盘 系统中所有用户的文件。此界面为系统管理员提供了更强大的监督功能，以便监控用户文件、执行批量操作并维护存储的整洁性。</p><h2 id="系统概述" tabindex="-1">系统概述 <a class="header-anchor" href="#系统概述" aria-label="Permalink to &quot;系统概述&quot;">​</a></h2><p>管理员文件管理系统通过 <code>FileList.vue</code> 组件实现，该组件为管理员提供了一个专用界面，用于浏览和管理所有用户的文件。与标准用户文件界面不同，此系统包含了额外的元数据（如文件所有者）和增强的删除功能。</p>',5)),(A(),r(B,null,{default:a(()=>[E(i,{id:"mermaid-24",class:"mermaid",graph:"flowchart%20TD%0A%0AA%5B%22FileList.vue%22%5D%0AB%5B%22%E6%90%9C%E7%B4%A2%E7%95%8C%E9%9D%A2%22%5D%0AC%5B%22%E5%AF%BC%E8%88%AA%E7%B3%BB%E7%BB%9F%22%5D%0AD%5B%22%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C%22%5D%0AE%5B%22%E6%89%B9%E9%87%8F%E6%93%8D%E4%BD%9C%22%5D%0AF%5B%22%E9%A2%84%E8%A7%88%E9%9B%86%E6%88%90%22%5D%0AG%5B%22Navigation.vue%22%5D%0AH%5B%22Preview.vue%22%5D%0AI%5B%22Table.vue%22%5D%0AJ%5B%22Icon.vue%22%5D%0AK%5B%22%2Fadmin%2FloadFileList%22%5D%0AL%5B%22%2Fadmin%2FdelFile%22%5D%0AM%5B%22%2Fadmin%2FcreateDownloadUrl%22%5D%0AN%5B%22%2Fapi%2Fadmin%2Fdownload%22%5D%0A%0A%20%20%20%20C%20--%3E%20G%0A%20%20%20%20F%20--%3E%20H%0A%20%20%20%20A%20--%3E%20I%0A%20%20%20%20A%20--%3E%20J%0A%20%20%20%20B%20--%3E%20K%0A%20%20%20%20D%20--%3E%20L%0A%20%20%20%20D%20--%3E%20M%0A%20%20%20%20D%20--%3E%20N%0A%20%20%20%20E%20--%3E%20L%0Asubgraph%20Admin_APIs%20%5B%22%E7%AE%A1%E7%90%86%E5%91%98%20API%22%5D%0A%20%20%20%20K%0A%20%20%20%20L%0A%20%20%20%20M%0A%20%20%20%20N%0Aend%0A%0Asubgraph%20Core_Components%20%5B%22%E6%A0%B8%E5%BF%83%E7%BB%84%E4%BB%B6%22%5D%0A%20%20%20%20G%0A%20%20%20%20H%0A%20%20%20%20I%0A%20%20%20%20J%0Aend%0A%0Asubgraph%20Admin_File_Management_System%20%5B%22%E7%AE%A1%E7%90%86%E5%91%98%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F%22%5D%0A%20%20%20%20A%0A%20%20%20%20B%0A%20%20%20%20C%0A%20%20%20%20D%0A%20%20%20%20E%0A%20%20%20%20F%0A%20%20%20%20A%20--%3E%20B%0A%20%20%20%20A%20--%3E%20C%0A%20%20%20%20A%20--%3E%20D%0A%20%20%20%20A%20--%3E%20E%0A%20%20%20%20A%20--%3E%20F%0Aend%0A"})]),fallback:a(()=>e[0]||(e[0]=[l(" Loading... ")])),_:1})),e[6]||(e[6]=t('<h2 id="组件架构" tabindex="-1">组件架构 <a class="header-anchor" href="#组件架构" aria-label="Permalink to &quot;组件架构&quot;">​</a></h2><p>管理员文件管理系统以 <code>FileList.vue</code> 组件为核心，该组件协调了几个关键的子系统：</p><h3 id="数据管理层" tabindex="-1">数据管理层 <a class="header-anchor" href="#数据管理层" aria-label="Permalink to &quot;数据管理层&quot;">​</a></h3><p>该组件维护文件列表、搜索参数和选择管理的响应式状态：</p><table tabindex="0"><thead><tr><th>状态变量</th><th>用途</th><th>类型</th></tr></thead><tbody><tr><td><code>tableData</code></td><td>带分页的文件列表数据</td><td>对象</td></tr><tr><td><code>fileNameFuzzy</code></td><td>搜索查询字符串</td><td>字符串</td></tr><tr><td><code>currentFolder</code></td><td>活动目录上下文</td><td>对象</td></tr><tr><td><code>selectFileIdList</code></td><td>用于批量操作的所选文件</td><td>数组</td></tr></tbody></table><h3 id="api-集成" tabindex="-1">API 集成 <a class="header-anchor" href="#api-集成" aria-label="Permalink to &quot;API 集成&quot;">​</a></h3><p>系统通过专用的管理员端点与后端服务进行通信：</p>',7)),(A(),r(B,null,{default:a(()=>[E(i,{id:"mermaid-104",class:"mermaid",graph:"flowchart%20TD%0A%0AA%5B%22loadDataList%22%5D%0AB%5B%22%2Fadmin%2FloadFileList%22%5D%0AC%5B%22delFile%22%5D%0AD%5B%22%2Fadmin%2FdelFile%22%5D%0AE%5B%22download%22%5D%0AF%5B%22%2Fadmin%2FcreateDownloadUrl%22%5D%0AG%5B%22%2Fapi%2Fadmin%2Fdownload%22%5D%0AH%5B%22pageNo%2C%20pageSize%22%5D%0AI%5B%22fileNameFuzzy%22%5D%0AJ%5B%22filePid%22%5D%0AK%5B%22fileIdAndUserIds%22%5D%0A%0A%20%20%20%20B%20--%3E%20H%0A%20%20%20%20B%20--%3E%20I%0A%20%20%20%20B%20--%3E%20J%0A%20%20%20%20D%20--%3E%20K%0A%20%20%20%20F%20--%3E%20K%0Asubgraph%20Request_Parameters%20%5B%22%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0%22%5D%0A%20%20%20%20H%0A%20%20%20%20I%0A%20%20%20%20J%0A%20%20%20%20K%0Aend%0A%0Asubgraph%20FileList_Component%20%5B%22FileList%20%E7%BB%84%E4%BB%B6%22%5D%0A%20%20%20%20A%0A%20%20%20%20B%0A%20%20%20%20C%0A%20%20%20%20D%0A%20%20%20%20E%0A%20%20%20%20F%0A%20%20%20%20G%0A%20%20%20%20A%20--%3E%20B%0A%20%20%20%20C%20--%3E%20D%0A%20%20%20%20E%20--%3E%20F%0A%20%20%20%20E%20--%3E%20G%0Aend%0A"})]),fallback:a(()=>e[1]||(e[1]=[l(" Loading... ")])),_:1})),e[7]||(e[7]=t('<h2 id="搜索与导航" tabindex="-1">搜索与导航 <a class="header-anchor" href="#搜索与导航" aria-label="Permalink to &quot;搜索与导航&quot;">​</a></h2><h3 id="搜索功能" tabindex="-1">搜索功能 <a class="header-anchor" href="#搜索功能" aria-label="Permalink to &quot;搜索功能&quot;">​</a></h3><p>搜索系统可对所有用户的文件进行模糊文件名匹配：</p><ul><li>输入框支持回车键和图标点击触发 <a href="https://github.com/xueldx/%E4%BC%98%E4%BA%AB%E4%BA%91%E7%9B%98-front/blob/3ffecfa5/src/views/admin/FileList.vue#L8-L17" target="_blank" rel="noreferrer">src/views/admin/FileList.vue L8-L17</a></li><li>搜索时使用 <code>fileNameFuzzy</code> 参数执行 <code>loadDataList()</code> 函数 <a href="https://github.com/xueldx/%E4%BC%98%E4%BA%AB%E4%BA%91%E7%9B%98-front/blob/3ffecfa5/src/views/admin/FileList.vue#L166-L169" target="_blank" rel="noreferrer">src/views/admin/FileList.vue L166-L169</a></li><li>搜索结果会更新表格显示，展示匹配的文件</li></ul><h3 id="目录导航" tabindex="-1">目录导航 <a class="header-anchor" href="#目录导航" aria-label="Permalink to &quot;目录导航&quot;">​</a></h3><p>导航功能与管理员模式下的共享 <code>Navigation</code> 组件集成：</p>',6)),(A(),r(B,null,{default:a(()=>[E(i,{id:"mermaid-137",class:"mermaid",graph:"flowchart%20TD%0A%0AF%5B%22%E6%96%87%E4%BB%B6%E7%82%B9%E5%87%BB%22%5D%0AG%5B%22folderType%20%E6%A3%80%E6%9F%A5%22%5D%0AH%5B%22%E7%9B%AE%E5%BD%95%3A%20openFolder()%22%5D%0AI%5B%22%E6%96%87%E4%BB%B6%3A%20showPreview()%22%5D%0AA%5B%22%E5%AF%BC%E8%88%AA%E7%BB%84%E4%BB%B6%22%5D%0AB%5B%22adminShow%3A%20true%22%5D%0AC%5B%22navChange%20%E4%BA%8B%E4%BB%B6%22%5D%0AD%5B%22currentFolder%20%E6%9B%B4%E6%96%B0%22%5D%0AE%5B%22loadDataList%20%E5%88%B7%E6%96%B0%22%5D%0A%0A%20%20%20%20D%20--%3E%20E%0Asubgraph%20Folder_Operations%20%5B%22%E6%96%87%E4%BB%B6%E5%A4%B9%E6%93%8D%E4%BD%9C%22%5D%0A%20%20%20%20F%0A%20%20%20%20G%0A%20%20%20%20H%0A%20%20%20%20I%0A%20%20%20%20A%0A%20%20%20%20B%0A%20%20%20%20C%0A%20%20%20%20D%0A%20%20%20%20F%20--%3E%20G%0A%20%20%20%20G%20--%3E%20H%0A%20%20%20%20G%20--%3E%20I%0A%20%20%20%20A%20--%3E%20B%0A%20%20%20%20A%20--%3E%20C%0A%20%20%20%20C%20--%3E%20D%0Aend%0A%0Asubgraph%20Navigation_Flow%20%5B%22%E5%AF%BC%E8%88%AA%E6%B5%81%E7%A8%8B%22%5D%0A%20%20%20%20E%0Aend%0A"})]),fallback:a(()=>e[2]||(e[2]=[l(" Loading... ")])),_:1})),e[8]||(e[8]=t('<h2 id="文件操作" tabindex="-1">文件操作 <a class="header-anchor" href="#文件操作" aria-label="Permalink to &quot;文件操作&quot;">​</a></h2><h3 id="单个文件操作" tabindex="-1">单个文件操作 <a class="header-anchor" href="#单个文件操作" aria-label="Permalink to &quot;单个文件操作&quot;">​</a></h3><p>每行文件支持在鼠标悬停时显示上下文操作：</p><ul><li><strong>下载</strong>：适用于文件（<code>folderType == 0</code>）且转码状态成功的情况 <a href="https://github.com/xueldx/%E4%BC%98%E4%BA%AB%E4%BA%91%E7%9B%98-front/blob/3ffecfa5/src/views/admin/FileList.vue#L94-L100" target="_blank" rel="noreferrer">src/views/admin/FileList.vue L94-L100</a></li><li><strong>删除</strong>：适用于所有文件，删除前会弹出确认对话框 <a href="https://github.com/xueldx/%E4%BC%98%E4%BA%AB%E4%BA%91%E7%9B%98-front/blob/3ffecfa5/src/views/admin/FileList.vue#L101-L103" target="_blank" rel="noreferrer">src/views/admin/FileList.vue L101-L103</a></li><li><strong>预览</strong>：点击文件名可预览兼容的文件类型 <a href="https://github.com/xueldx/%E4%BC%98%E4%BA%AB%E4%BA%91%E7%9B%98-front/blob/3ffecfa5/src/views/admin/FileList.vue#L82-L88" target="_blank" rel="noreferrer">src/views/admin/FileList.vue L82-L88</a></li></ul><h3 id="批量操作" tabindex="-1">批量操作 <a class="header-anchor" href="#批量操作" aria-label="Permalink to &quot;批量操作&quot;">​</a></h3><p>系统支持通过复选框选择进行多选操作：</p>',6)),(A(),r(B,null,{default:a(()=>[E(i,{id:"mermaid-170",class:"mermaid",graph:"flowchart%20TD%0A%0AA%5B%22%E8%A1%A8%E6%A0%BC%E5%A4%8D%E9%80%89%E6%A1%86%22%5D%0AB%5B%22rowSelected%20%E4%BA%8B%E4%BB%B6%22%5D%0AC%5B%22selectFileIdList%20%E6%9B%B4%E6%96%B0%22%5D%0AD%5B%22%E5%88%97%E6%A0%87%E9%A2%98%E6%9B%B4%E6%96%B0%22%5D%0AE%5B%22%E5%88%A0%E9%99%A4%E6%8C%89%E9%92%AE%22%5D%0AF%5B%22%E7%A1%AE%E8%AE%A4%E5%AF%B9%E8%AF%9D%E6%A1%86%22%5D%0AG%5B%22%E5%B8%A6%20ID%20%E7%9A%84%20API%20%E8%B0%83%E7%94%A8%22%5D%0AH%5B%22%E6%88%90%E5%8A%9F%E5%88%B7%E6%96%B0%22%5D%0A%0A%20%20%20%20C%20--%3E%20E%0Asubgraph%20Batch_Deletion%20%5B%22%E6%89%B9%E9%87%8F%E5%88%A0%E9%99%A4%22%5D%0A%20%20%20%20E%0A%20%20%20%20F%0A%20%20%20%20G%0A%20%20%20%20H%0A%20%20%20%20E%20--%3E%20F%0A%20%20%20%20F%20--%3E%20G%0A%20%20%20%20G%20--%3E%20H%0Aend%0A%0Asubgraph%20Batch_Selection%20%5B%22%E6%89%B9%E9%87%8F%E9%80%89%E6%8B%A9%22%5D%0A%20%20%20%20A%0A%20%20%20%20B%0A%20%20%20%20C%0A%20%20%20%20D%0A%20%20%20%20A%20--%3E%20B%0A%20%20%20%20B%20--%3E%20C%0A%20%20%20%20C%20--%3E%20D%0Aend%0A"})]),fallback:a(()=>e[3]||(e[3]=[l(" Loading... ")])),_:1})),e[9]||(e[9]=t('<p>选择系统使用格式为 <code>userId_fileId</code> 的复合标识符来唯一标识跨用户的文件 <a href="https://github.com/xueldx/%E4%BC%98%E4%BA%AB%E4%BA%91%E7%9B%98-front/blob/3ffecfa5/src/views/admin/FileList.vue#L233-L242" target="_blank" rel="noreferrer">src/views/admin/FileList.vue L233-L242</a></p><h2 id="表格显示系统" tabindex="-1">表格显示系统 <a class="header-anchor" href="#表格显示系统" aria-label="Permalink to &quot;表格显示系统&quot;">​</a></h2><h3 id="列配置" tabindex="-1">列配置 <a class="header-anchor" href="#列配置" aria-label="Permalink to &quot;列配置&quot;">​</a></h3><p>文件表格显示了供管理员监督的重要元数据：</p>',4)),(A(),r(B,null,{default:a(()=>[E(i,{id:"mermaid-183",class:"mermaid",graph:"flowchart%20TD%0A%0AA%5B%22fileName%22%5D%0AB%5B%22%E5%B8%A6%E6%93%8D%E4%BD%9C%E7%9A%84%E6%96%87%E4%BB%B6%E5%90%8D%22%5D%0AC%5B%22nickName%22%5D%0AD%5B%22%E6%96%87%E4%BB%B6%E6%89%80%E6%9C%89%E8%80%85%22%5D%0AE%5B%22lastUpdateTime%22%5D%0AF%5B%22%E4%BF%AE%E6%94%B9%E6%97%A5%E6%9C%9F%22%5D%0AG%5B%22fileSize%22%5D%0AH%5B%22%E5%A4%A7%E5%B0%8F%E6%98%BE%E7%A4%BA%22%5D%0AI%5B%22%E5%9B%BE%E6%A0%87%E6%98%BE%E7%A4%BA%22%5D%0AJ%5B%22%E7%8A%B6%E6%80%81%E6%8C%87%E7%A4%BA%E5%99%A8%22%5D%0AK%5B%22%E6%93%8D%E4%BD%9C%E8%8F%9C%E5%8D%95%22%5D%0AL%5B%22%E5%A4%A7%E5%B0%8F%E6%A0%BC%E5%BC%8F%E5%8C%96%22%5D%0A%0A%20%20%20%20B%20--%3E%20I%0A%20%20%20%20B%20--%3E%20J%0A%20%20%20%20B%20--%3E%20K%0A%20%20%20%20H%20--%3E%20L%0Asubgraph%20Special_Rendering%20%5B%22%E7%89%B9%E6%AE%8A%E6%B8%B2%E6%9F%93%22%5D%0A%20%20%20%20I%0A%20%20%20%20J%0A%20%20%20%20K%0A%20%20%20%20L%0Aend%0A%0Asubgraph%20Table_Columns%20%5B%22%E8%A1%A8%E6%A0%BC%E5%88%97%22%5D%0A%20%20%20%20A%0A%20%20%20%20B%0A%20%20%20%20C%0A%20%20%20%20D%0A%20%20%20%20E%0A%20%20%20%20F%0A%20%20%20%20G%0A%20%20%20%20H%0A%20%20%20%20A%20--%3E%20B%0A%20%20%20%20C%20--%3E%20D%0A%20%20%20%20E%20--%3E%20F%0A%20%20%20%20G%20--%3E%20H%0Aend%0A"})]),fallback:a(()=>e[4]||(e[4]=[l(" Loading... ")])),_:1})),e[10]||(e[10]=t('<h3 id="文件状态处理" tabindex="-1">文件状态处理 <a class="header-anchor" href="#文件状态处理" aria-label="Permalink to &quot;文件状态处理&quot;">​</a></h3><p>系统显示媒体文件的转码状态：</p><ul><li><strong>状态 0</strong>：&quot;转码中&quot; (Transcoding) <a href="https://github.com/xueldx/%E4%BC%98%E4%BA%AB%E4%BA%91%E7%9B%98-front/blob/3ffecfa5/src/views/admin/FileList.vue#L84-L84" target="_blank" rel="noreferrer">src/views/admin/FileList.vue L84</a></li><li><strong>状态 1</strong>：&quot;转码失败&quot; (Transcoding Failed) <a href="https://github.com/xueldx/%E4%BC%98%E4%BA%AB%E4%BA%91%E7%9B%98-front/blob/3ffecfa5/src/views/admin/FileList.vue#L85-L87" target="_blank" rel="noreferrer">src/views/admin/FileList.vue L85-L87</a></li><li><strong>状态 2</strong>：可正常操作 <a href="https://github.com/xueldx/%E4%BC%98%E4%BA%AB%E4%BA%91%E7%9B%98-front/blob/3ffecfa5/src/views/admin/FileList.vue#L92-L92" target="_blank" rel="noreferrer">src/views/admin/FileList.vue L92</a></li></ul><h2 id="下载系统" tabindex="-1">下载系统 <a class="header-anchor" href="#下载系统" aria-label="Permalink to &quot;下载系统&quot;">​</a></h2><p>文件下载采用两步安全流程：</p><ol><li><strong>下载 URL 创建</strong>：通过 <code>/admin/createDownloadUrl/{userId}/{fileId}</code> 请求安全下载令牌 <a href="https://github.com/xueldx/%E4%BC%98%E4%BA%AB%E4%BA%91%E7%9B%98-front/blob/3ffecfa5/src/views/admin/FileList.vue#L309-L311" target="_blank" rel="noreferrer">src/views/admin/FileList.vue L309-L311</a></li><li><strong>文件获取</strong>：重定向到 <code>/api/admin/download/{token}</code> 以实际下载文件 <a href="https://github.com/xueldx/%E4%BC%98%E4%BA%AB%E4%BA%91%E7%9B%98-front/blob/3ffecfa5/src/views/admin/FileList.vue#L317-L317" target="_blank" rel="noreferrer">src/views/admin/FileList.vue L317</a></li></ol><p>这种模式确保了管理员级别的访问控制，并防止未经授权的直接文件访问。</p><h2 id="集成点" tabindex="-1">集成点 <a class="header-anchor" href="#集成点" aria-label="Permalink to &quot;集成点&quot;">​</a></h2><h3 id="预览系统集成" tabindex="-1">预览系统集成 <a class="header-anchor" href="#预览系统集成" aria-label="Permalink to &quot;预览系统集成&quot;">​</a></h3><p>管理员文件管理器与共享预览系统集成：</p><ul><li>点击兼容文件的文件名可触发预览 <a href="https://github.com/xueldx/%E4%BC%98%E4%BA%AB%E4%BA%91%E7%9B%98-front/blob/3ffecfa5/src/views/admin/FileList.vue#L83-L83" target="_blank" rel="noreferrer">src/views/admin/FileList.vue L83</a></li><li>状态验证可防止预览未完成转码的文件 <a href="https://github.com/xueldx/%E4%BC%98%E4%BA%AB%E4%BA%91%E7%9B%98-front/blob/3ffecfa5/src/views/admin/FileList.vue#L292-L295" target="_blank" rel="noreferrer">src/views/admin/FileList.vue L292-L295</a></li><li>预览组件接收文件数据和管理员上下文标志 <a href="https://github.com/xueldx/%E4%BC%98%E4%BA%AB%E4%BA%91%E7%9B%98-front/blob/3ffecfa5/src/views/admin/FileList.vue#L296-L296" target="_blank" rel="noreferrer">src/views/admin/FileList.vue L296</a></li></ul>',11))])}const L=o(s,[["render",u]]);export{F as __pageData,L as default};
