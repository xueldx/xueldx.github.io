import{_ as k,C as r,c as d,o as n,a8 as h,b as e,j as t,w as i,a,G as p,a9 as E}from"./chunks/framework.DW4T_yAZ.js";const b=JSON.parse('{"title":"å¤§æ–‡ä»¶ä¸Šä¼ ç³»ç»Ÿ","description":"","frontmatter":{},"headers":[],"relativePath":"projects/LitePan/3-file-management-system/3.2-file-upload-system.md","filePath":"projects/LitePan/3-file-management-system/3.2-file-upload-system.md","lastUpdated":1749448992000}'),A={name:"projects/LitePan/3-file-management-system/3.2-file-upload-system.md"};function B(g,s,c,F,y,o){const l=r("Mermaid");return n(),d("div",null,[s[7]||(s[7]=h(`<h1 id="å¤§æ–‡ä»¶ä¸Šä¼ ç³»ç»Ÿ" tabindex="-1">å¤§æ–‡ä»¶ä¸Šä¼ ç³»ç»Ÿ <a class="header-anchor" href="#å¤§æ–‡ä»¶ä¸Šä¼ ç³»ç»Ÿ" aria-label="Permalink to &quot;å¤§æ–‡ä»¶ä¸Šä¼ ç³»ç»Ÿ&quot;">â€‹</a></h1><blockquote><p><strong>ç›¸å…³æºæ–‡ä»¶</strong></p><ul><li><a href="https://github.com/xueldx/%E4%BC%98%E4%BA%AB%E4%BA%91%E7%9B%98-front/blob/3ffecfa5/src/utils/Verify.js" target="_blank" rel="noreferrer">src/utils/Verify.js</a></li><li><a href="https://github.com/xueldx/%E4%BC%98%E4%BA%AB%E4%BA%91%E7%9B%98-front/blob/3ffecfa5/src/views/main/Uploader.vue" target="_blank" rel="noreferrer">src/views/main/Uploader.vue</a></li></ul></blockquote><p>æœ¬èŠ‚å…¨é¢ä»‹ç»äº† ä¼˜äº«äº‘ç›˜ ä¸­çš„æ–‡ä»¶ä¸Šä¼ ç³»ç»Ÿï¼Œè¯¥ç³»ç»Ÿå…·å¤‡å…ˆè¿›çš„<code>åˆ†å—ä¸Šä¼ </code>åŠŸèƒ½ï¼Œå¹¶æ”¯æŒ <code>MD5</code> éªŒè¯ã€<code>è¿›åº¦è·Ÿè¸ª</code>ä»¥åŠ<code>æ–­ç‚¹ç»­ä¼ </code>ã€‚ç³»ç»Ÿé€šè¿‡æ–‡ä»¶åˆ†å‰²é«˜æ•ˆå¤„ç†å¤§æ–‡ä»¶ä¸Šä¼ ï¼Œå¹¶èƒ½ä¸ºç”¨æˆ·æä¾›å®æ—¶åé¦ˆã€‚</p><h2 id="ç³»ç»Ÿæ¦‚è¿°" tabindex="-1">ç³»ç»Ÿæ¦‚è¿° <a class="header-anchor" href="#ç³»ç»Ÿæ¦‚è¿°" aria-label="Permalink to &quot;ç³»ç»Ÿæ¦‚è¿°&quot;">â€‹</a></h2><div class="tip custom-block"><p class="custom-block-title">æ–‡ä»¶ä¸Šä¼ ç³»ç»Ÿå›´ç»• <code>Uploader.vue</code> ç»„ä»¶æ„å»ºï¼Œæä¾›ä¼ä¸šçº§çš„ä¸Šä¼ åŠŸèƒ½ï¼ŒåŒ…æ‹¬ï¼š</p><ul><li><strong>åˆ†å—ä¸Šä¼ </strong>ï¼šç”¨äºå¤„ç†å¤§æ–‡ä»¶ï¼ˆæ¯å— 5MBï¼‰</li><li><strong>MD5 è®¡ç®—</strong>ï¼šç”¨äºæ–‡ä»¶å®Œæ•´æ€§éªŒè¯</li><li><strong>è¿›åº¦è·Ÿè¸ª</strong>ï¼šå®æ—¶æ›´æ–°è¿›åº¦</li><li><strong>æš‚åœ/æ¢å¤</strong>ï¼šæ”¯æŒä¸­æ–­ä¸Šä¼ åç»§ç»­</li><li><strong>ç§’ä¼ æ£€æµ‹</strong>ï¼šæ£€æµ‹é‡å¤æ–‡ä»¶å®ç°ç§’ä¼ </li><li><strong>çŠ¶æ€ç®¡ç†</strong>ï¼šå¯è§†åŒ–åé¦ˆä¸Šä¼ çŠ¶æ€</li></ul></div><h2 id="ç»„ä»¶é›†æˆ" tabindex="-1">ç»„ä»¶é›†æˆ <a class="header-anchor" href="#ç»„ä»¶é›†æˆ" aria-label="Permalink to &quot;ç»„ä»¶é›†æˆ&quot;">â€‹</a></h2><h3 id="æ–‡ä»¶ä¸Šä¼ ç»„ä»¶å°è£…ä¸å‚æ•°ä¼ é€’æ¶æ„" tabindex="-1">æ–‡ä»¶ä¸Šä¼ ç»„ä»¶å°è£…ä¸å‚æ•°ä¼ é€’æ¶æ„ <a class="header-anchor" href="#æ–‡ä»¶ä¸Šä¼ ç»„ä»¶å°è£…ä¸å‚æ•°ä¼ é€’æ¶æ„" aria-label="Permalink to &quot;æ–‡ä»¶ä¸Šä¼ ç»„ä»¶å°è£…ä¸å‚æ•°ä¼ é€’æ¶æ„&quot;">â€‹</a></h3><p>ç³»ç»Ÿé‡‡ç”¨ç»„ä»¶åŒ–è®¾è®¡æ€æƒ³ï¼Œé€šè¿‡çˆ¶å­ç»„ä»¶é—´çš„å‚æ•°ä¼ é€’æœºåˆ¶å®ç°äº†é«˜æ•ˆçš„æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½ã€‚ä¸»è¦ç»„ä»¶åŒ…æ‹¬ Main.vueï¼ˆæ–‡ä»¶é€‰æ‹©å…¥å£ï¼‰ã€Framework.vueï¼ˆä¸­é—´åè°ƒå±‚ï¼‰å’Œ Uploader.vueï¼ˆå®é™…æ–‡ä»¶å¤„ç†ç»„ä»¶ï¼‰ï¼Œå½¢æˆäº†å±‚æ¬¡åˆ†æ˜çš„æ–‡ä»¶ä¸Šä¼ å¤„ç†æµç¨‹ã€‚</p><h3 id="ç»„ä»¶èŒè´£ä¸äº¤äº’æµç¨‹" tabindex="-1">ç»„ä»¶èŒè´£ä¸äº¤äº’æµç¨‹ <a class="header-anchor" href="#ç»„ä»¶èŒè´£ä¸äº¤äº’æµç¨‹" aria-label="Permalink to &quot;ç»„ä»¶èŒè´£ä¸äº¤äº’æµç¨‹&quot;">â€‹</a></h3><table tabindex="0"><thead><tr><th>ç»„ä»¶åç§°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>Main.vue</td><td>ä½œä¸ºæ–‡ä»¶ä¸Šä¼ çš„å…¥å£ç»„ä»¶ï¼Œæä¾›æ–‡ä»¶é€‰æ‹©åŠŸèƒ½ã€‚<br>ä½¿ç”¨ <code>:http-request</code> æŒ‡ä»¤å°† <code>addFile</code> æ–¹æ³•ç»‘å®šåˆ°ä¸€ä¸ª HTTP è¯·æ±‚äº‹ä»¶ä¸Šã€‚<br>å®šä¹‰å¹¶è§¦å‘è‡ªå®šä¹‰äº‹ä»¶ addFileï¼Œä¼ é€’åŒ…å«æ–‡ä»¶å’Œçˆ¶çº§æ–‡ä»¶å¤¹ ID çš„æ•°æ®å¯¹è±¡ã€‚</td></tr><tr><td>Framework.vue</td><td>ç›‘å¬æ¥è‡ª Main.vue çš„ &quot;addFile&quot; äº‹ä»¶ï¼Œå¹¶è°ƒç”¨ <code>addFile</code> æ–¹æ³•è¿›è¡Œå¤„ç†ã€‚<br>åœ¨ <code>addFile</code> æ–¹æ³•ä¸­ï¼Œè®¾ç½® <code>showUploader.value</code> ä¸º <code>true</code> ä»¥æ˜¾ç¤º Uploader ç»„ä»¶ã€‚<br>è°ƒç”¨ <code>uploaderRef</code> å¼•ç”¨çš„ Uploader ç»„ä»¶çš„ <code>addFile</code> æ–¹æ³•ã€‚</td></tr><tr><td>Uploader.vue</td><td>å®šä¹‰äº† <code>addFile</code> æ–¹æ³•ï¼Œç”¨äºæ¥æ”¶æ–‡ä»¶å’Œæ–‡ä»¶çˆ¶çº§ ID è¿›è¡Œå…·ä½“çš„ä¸Šä¼ æ–‡ä»¶æ“ä½œã€‚<br>ä½¿ç”¨ <code>defineExpose</code> å‡½æ•°å°† <code>addFile</code> æ–¹æ³•æš´éœ²ç»™å…¶ä»–ç»„ä»¶ä»¥ä¾›è°ƒç”¨ã€‚</td></tr></tbody></table><h3 id="æ•°æ®æµä¸æ–¹æ³•è°ƒç”¨æµç¨‹" tabindex="-1">æ•°æ®æµä¸æ–¹æ³•è°ƒç”¨æµç¨‹ <a class="header-anchor" href="#æ•°æ®æµä¸æ–¹æ³•è°ƒç”¨æµç¨‹" aria-label="Permalink to &quot;æ•°æ®æµä¸æ–¹æ³•è°ƒç”¨æµç¨‹&quot;">â€‹</a></h3><p><strong>1.æ–‡ä»¶é€‰æ‹©ä¸äº‹ä»¶è§¦å‘</strong></p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Main.vue</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> emit</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineEmits</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;addFile&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> addFile</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">fileData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  emit</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;addFile&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    file: fileData.file,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    filePid: currentFoloder.value.fileId,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><strong>2.ä¸­é—´å±‚äº‹ä»¶å¤„ç†ä¸ç»„ä»¶è°ƒç”¨</strong></p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Framework.vue</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">component</span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;"> :is=&quot;Component&quot;</span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;"> @addFile=&quot;addFile&quot;&gt;&lt;/component&gt;</span></span>
<span class="line"><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;">&lt;Uploader</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ref</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;uploaderRef&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&lt;/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Uploader</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> addFile</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">data</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">file</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">filePid</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> data;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  showUploader.value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  uploaderRef.value.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addFile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(file, filePid);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><strong>3.æ–‡ä»¶ä¸Šä¼ ç»„ä»¶å®ç°</strong></p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Uploader.vue</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> addFile</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">file</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">filePid</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // æ–‡ä»¶å¤„ç†é€»è¾‘ï¼šåˆ‡ç‰‡ã€MD5è®¡ç®—ã€ä¸Šä¼ ç­‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">defineExpose</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ addFile })</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="æ–‡ä»¶ä¸Šä¼ ç»„ä»¶æ¶æ„æ¦‚è¿°" tabindex="-1">æ–‡ä»¶ä¸Šä¼ ç»„ä»¶æ¶æ„æ¦‚è¿° <a class="header-anchor" href="#æ–‡ä»¶ä¸Šä¼ ç»„ä»¶æ¶æ„æ¦‚è¿°" aria-label="Permalink to &quot;æ–‡ä»¶ä¸Šä¼ ç»„ä»¶æ¶æ„æ¦‚è¿°&quot;">â€‹</a></h2>`,18)),(n(),e(E,null,{default:i(()=>[p(l,{id:"mermaid-128",class:"mermaid",graph:"flowchart%20TD%0A%0AUploaderVue%5B%22Uploader.vue%3Cbr%3E%E4%B8%BB%E4%B8%8A%E4%BC%A0%E6%8E%A7%E5%88%B6%E5%99%A8%22%5D%0AFileList%5B%22fileList%3Cbr%3E%E4%B8%8A%E4%BC%A0%E9%98%9F%E5%88%97%E7%AE%A1%E7%90%86%22%5D%0AStatusMgr%5B%22STATUS%3Cbr%3E%E7%8A%B6%E6%80%81%E5%AE%9A%E4%B9%89%22%5D%0AMD5Calc%5B%22computeMD5()%3Cbr%3E%E6%96%87%E4%BB%B6%E5%93%88%E5%B8%8C%E8%AE%A1%E7%AE%97%22%5D%0AChunkMgr%5B%22chunkSize%3Cbr%3E5MB%20%E5%88%86%E5%9D%97%E7%AE%A1%E7%90%86%22%5D%0ASparkMD5%5B%22SparkMD5%3Cbr%3E%E5%A2%9E%E9%87%8F%E5%93%88%E5%B8%8C%E5%BA%93%22%5D%0AUploadFunc%5B%22uploadFile()%3Cbr%3E%E5%88%86%E5%9D%97%E4%B8%8A%E4%BC%A0%E9%80%BB%E8%BE%91%22%5D%0APauseFunc%5B%22pauseUpload()%3Cbr%3E%E6%9A%82%E5%81%9C%E6%8E%A7%E5%88%B6%22%5D%0AStartFunc%5B%22startUpload()%3Cbr%3E%E6%81%A2%E5%A4%8D%E6%8E%A7%E5%88%B6%22%5D%0ADelFunc%5B%22delUpload()%3Cbr%3E%E5%8F%96%E6%B6%88%E6%8E%A7%E5%88%B6%22%5D%0AAPIEndpoint%5B%22%2Ffile%2FuploadFile%3Cbr%3E%E4%B8%8A%E4%BC%A0%20API%22%5D%0ARequestJS%5B%22Request.js%3Cbr%3EHTTP%20%E5%AE%A2%E6%88%B7%E7%AB%AF%22%5D%0AProgressCallback%5B%22uploadProgressCallback%3Cbr%3E%E8%BF%9B%E5%BA%A6%E6%9B%B4%E6%96%B0%22%5D%0A%0A%20%20%20%20UploaderVue%20--%3E%20MD5Calc%0A%20%20%20%20UploaderVue%20--%3E%20UploadFunc%0A%20%20%20%20UploaderVue%20--%3E%20PauseFunc%0A%20%20%20%20UploaderVue%20--%3E%20StartFunc%0A%20%20%20%20UploaderVue%20--%3E%20DelFunc%0A%20%20%20%20UploadFunc%20--%3E%20RequestJS%0A%20%20%20%20ProgressCallback%20--%3E%20FileList%0Asubgraph%20Backend_Integration%20%5B%22%E5%90%8E%E7%AB%AF%E9%9B%86%E6%88%90%22%5D%0A%20%20%20%20APIEndpoint%0A%20%20%20%20RequestJS%0A%20%20%20%20ProgressCallback%0A%20%20%20%20RequestJS%20--%3E%20APIEndpoint%0A%20%20%20%20RequestJS%20--%3E%20ProgressCallback%0Aend%0A%0Asubgraph%20Upload_Operations%20%5B%22%E4%B8%8A%E4%BC%A0%E6%93%8D%E4%BD%9C%22%5D%0A%20%20%20%20UploadFunc%0A%20%20%20%20PauseFunc%0A%20%20%20%20StartFunc%0A%20%20%20%20DelFunc%0Aend%0A%0Asubgraph%20File_Processing_Layer%20%5B%22%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86%E5%B1%82%22%5D%0A%20%20%20%20MD5Calc%0A%20%20%20%20ChunkMgr%0A%20%20%20%20SparkMD5%0A%20%20%20%20MD5Calc%20--%3E%20SparkMD5%0A%20%20%20%20MD5Calc%20--%3E%20ChunkMgr%0Aend%0A%0Asubgraph%20Upload_Component_Layer%20%5B%22%E4%B8%8A%E4%BC%A0%E7%BB%84%E4%BB%B6%E5%B1%82%22%5D%0A%20%20%20%20UploaderVue%0A%20%20%20%20FileList%0A%20%20%20%20StatusMgr%0A%20%20%20%20UploaderVue%20--%3E%20FileList%0A%20%20%20%20UploaderVue%20--%3E%20StatusMgr%0Aend%0A"})]),fallback:i(()=>s[0]||(s[0]=[a(" Loading... ")])),_:1})),s[8]||(s[8]=h(`<h2 id="æ–‡ä»¶æ•°æ®ç»“æ„è®¾è®¡" tabindex="-1">æ–‡ä»¶æ•°æ®ç»“æ„è®¾è®¡ <a class="header-anchor" href="#æ–‡ä»¶æ•°æ®ç»“æ„è®¾è®¡" aria-label="Permalink to &quot;æ–‡ä»¶æ•°æ®ç»“æ„è®¾è®¡&quot;">â€‹</a></h2><h3 id="ä¸Šä¼ çŠ¶æ€ç®¡ç†" tabindex="-1">ä¸Šä¼ çŠ¶æ€ç®¡ç† <a class="header-anchor" href="#ä¸Šä¼ çŠ¶æ€ç®¡ç†" aria-label="Permalink to &quot;ä¸Šä¼ çŠ¶æ€ç®¡ç†&quot;">â€‹</a></h3><p>ç³»ç»Ÿé€šè¿‡ <code>STATUS</code> å¯¹è±¡å®šä¹‰äº†å…­ç§ä¸åŒçš„ä¸Šä¼ çŠ¶æ€ï¼š</p><table tabindex="0"><thead><tr><th>çŠ¶æ€</th><th>å€¼</th><th>æè¿°</th><th>é¢œè‰²ä»£ç </th><th>å›¾æ ‡</th></tr></thead><tbody><tr><td>ç©ºæ–‡ä»¶</td><td><code>emptyfile</code></td><td>æ–‡ä»¶ä¸ºç©ºï¼ˆ0 å­—èŠ‚ï¼‰</td><td><code>#F75000</code></td><td><code>å…³é—­</code></td></tr><tr><td>å¤±è´¥</td><td><code>fail</code></td><td>ä¸Šä¼ å¤±è´¥å¹¶æŠ¥é”™</td><td><code>#F75000</code></td><td><code>å…³é—­</code></td></tr><tr><td>åˆå§‹åŒ–ä¸­</td><td><code>init</code></td><td>æ­£åœ¨è¿›è¡Œ MD5 è®¡ç®—</td><td><code>#e6a23c</code></td><td><code>æ—¶é’Ÿ</code></td></tr><tr><td>ä¸Šä¼ ä¸­</td><td><code>uploading</code></td><td>æ–‡ä»¶æ­£åœ¨ä¸Šä¼ </td><td><code>#409eff</code></td><td><code>ä¸Šä¼ </code></td></tr><tr><td>å®Œæˆ</td><td><code>upload_finish</code></td><td>ä¸Šä¼ æ­£å¸¸å®Œæˆ</td><td><code>#67c23a</code></td><td><code>æˆåŠŸ</code></td></tr><tr><td>ç§’ä¼ </td><td><code>upload_seconds</code></td><td>æ£€æµ‹åˆ°é‡å¤æ–‡ä»¶ï¼ˆç§’ä¼ ï¼‰</td><td><code>#67c23a</code></td><td><code>æˆåŠŸ</code></td></tr></tbody></table><h3 id="æ–‡ä»¶é¡¹ç»“æ„" tabindex="-1">æ–‡ä»¶é¡¹ç»“æ„ <a class="header-anchor" href="#æ–‡ä»¶é¡¹ç»“æ„" aria-label="Permalink to &quot;æ–‡ä»¶é¡¹ç»“æ„&quot;">â€‹</a></h3><p>æ¯ä¸ªä¸Šä¼ ä»»åŠ¡ç”±ä¸€ä¸ª <code>fileItem</code> å¯¹è±¡è¡¨ç¤ºï¼ŒåŒ…å«ä»¥ä¸‹ä¿¡æ¯ï¼š</p><div class="language-yaml vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">// æ ¸å¿ƒæ–‡ä»¶å±æ€§</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">file</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">File               // åŸå§‹æ–‡ä»¶å¯¹è±¡</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">uid</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">string             // å”¯ä¸€æ ‡è¯†ç¬¦</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">fileName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">string        // æ˜¾ç¤ºåç§°</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">totalSize</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">number       // æ–‡ä»¶å¤§å°ï¼ˆå­—èŠ‚ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">filePid</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">string         // çˆ¶æ–‡ä»¶å¤¹ ID</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">// MD5 è®¡ç®—</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">md5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">string            // è®¡ç®—å¾—åˆ°çš„å“ˆå¸Œå€¼</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">md5Progress</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">number    // å“ˆå¸Œè®¡ç®—è¿›åº¦ï¼ˆ0 - 100ï¼‰</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">// ä¸Šä¼ è·Ÿè¸ª</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">status</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">string         // å½“å‰çŠ¶æ€å€¼</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">uploadSize</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">number     // å·²ä¸Šä¼ çš„å­—èŠ‚æ•°</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">uploadProgress</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">number // ä¸Šä¼ è¿›åº¦ï¼ˆ0 - 100ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">chunkIndex</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">number     // å½“å‰æ­£åœ¨ä¸Šä¼ çš„åˆ†å—ç´¢å¼•</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">// æ§åˆ¶æ ‡å¿—</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">pause</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">boolean         // æš‚åœçŠ¶æ€</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">errorMsg</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">string       // å¤±è´¥æ—¶çš„é”™è¯¯ä¿¡æ¯</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">fileId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">string         // æœåŠ¡å™¨åˆ†é…çš„æ–‡ä»¶ ID</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h2 id="ä¸Šä¼ æµç¨‹" tabindex="-1">ä¸Šä¼ æµç¨‹ <a class="header-anchor" href="#ä¸Šä¼ æµç¨‹" aria-label="Permalink to &quot;ä¸Šä¼ æµç¨‹&quot;">â€‹</a></h2>`,8)),(n(),e(E,null,{default:i(()=>[p(l,{id:"mermaid-273",class:"mermaid",graph:"sequenceDiagram%0A%20%20participant%20Framework.vue%0A%20%20participant%20Uploader.vue%0A%20%20participant%20computeMD5()%0A%20%20participant%20uploadFile()%0A%20%20participant%20%2Ffile%2FuploadFile%0A%0A%20%20Framework.vue-%3E%3EUploader.vue%3A%20addFile(file%2C%20filePid)%0A%20%20Uploader.vue-%3E%3EUploader.vue%3A%20%E5%88%9B%E5%BB%BA%E5%B8%A6%E6%9C%89%20STATUS.init%20%E7%8A%B6%E6%80%81%E7%9A%84%E6%96%87%E4%BB%B6%E9%A1%B9%0A%20%20Uploader.vue-%3E%3EcomputeMD5()%3A%20%E8%AE%A1%E7%AE%97%E6%96%87%E4%BB%B6%E9%A1%B9%E7%9A%84%20MD5%0A%20%20loop%20%5B%E5%AF%B9%E6%AF%8F%E4%B8%AA%E5%88%86%E5%9D%97%5D%0A%20%20%20%20computeMD5()-%3E%3EcomputeMD5()%3A%20%E4%BD%BF%E7%94%A8%20FileReader%20%E8%AF%BB%E5%8F%96%E5%88%86%E5%9D%97%0A%20%20%20%20computeMD5()-%3E%3EcomputeMD5()%3A%20spark.append(%E5%88%86%E5%9D%97)%0A%20%20%20%20computeMD5()-%3E%3EUploader.vue%3A%20%E6%9B%B4%E6%96%B0%20MD5%20%E8%AE%A1%E7%AE%97%E8%BF%9B%E5%BA%A6%0A%20%20%20%20computeMD5()-%3E%3EUploader.vue%3A%20%E8%AE%BE%E7%BD%AE%20STATUS.uploading%20%E7%8A%B6%E6%80%81%E5%92%8C%20MD5%20%E5%80%BC%0A%20%20%20%20Uploader.vue-%3E%3EuploadFile()%3A%20%E4%B8%8A%E4%BC%A0%E6%96%87%E4%BB%B6(uid)%0A%20%20%20%20uploadFile()-%3E%3EuploadFile()%3A%20%E5%88%9B%E5%BB%BA%E5%88%86%E5%9D%97%E6%96%87%E4%BB%B6%20%3D%20%E6%96%87%E4%BB%B6%E5%88%87%E7%89%87(%E8%B5%B7%E5%A7%8B%E4%BD%8D%E7%BD%AE%2C%20%E7%BB%93%E6%9D%9F%E4%BD%8D%E7%BD%AE)%0A%20%20%20%20uploadFile()-%3E%3E%2Ffile%2FuploadFile%3A%20POST%20%E8%AF%B7%E6%B1%82%EF%BC%8C%E6%90%BA%E5%B8%A6%E5%88%86%E5%9D%97%E6%96%87%E4%BB%B6%E5%92%8C%E5%85%83%E6%95%B0%E6%8D%AE%0A%20%20%20%20%2Ffile%2FuploadFile-%3E%3EuploadFile()%3A%20%E4%B8%8A%E4%BC%A0%E8%BF%9B%E5%BA%A6%E5%9B%9E%E8%B0%83(event)%0A%20%20%20%20uploadFile()-%3E%3EUploader.vue%3A%20%E6%9B%B4%E6%96%B0%E5%B7%B2%E4%B8%8A%E4%BC%A0%E5%A4%A7%E5%B0%8F%E5%92%8C%E4%B8%8A%E4%BC%A0%E8%BF%9B%E5%BA%A6%0A%20%20%20%20%2Ffile%2FuploadFile-%3E%3EuploadFile()%3A%20%E7%8A%B6%E6%80%81%EF%BC%9A%E4%B8%8A%E4%BC%A0%E5%AE%8C%E6%88%90%2F%E7%A7%92%E4%BC%A0%0A%20%20%20%20uploadFile()-%3E%3EFramework.vue%3A%20%E8%A7%A6%E5%8F%91(%22%E4%B8%8A%E4%BC%A0%E5%9B%9E%E8%B0%83%22)%0A%20%20%20%20%2Ffile%2FuploadFile-%3E%3EuploadFile()%3A%20%E7%BB%A7%E7%BB%AD%E5%A4%84%E7%90%86%E4%B8%8B%E4%B8%80%E4%B8%AA%E5%88%86%E5%9D%97%0A%20%20end%0A"})]),fallback:i(()=>s[1]||(s[1]=[a(" Loading... ")])),_:1})),s[9]||(s[9]=t("h2",{id:"æ–‡ä»¶å¤„ç†",tabindex:"-1"},[a("æ–‡ä»¶å¤„ç† "),t("a",{class:"header-anchor",href:"#æ–‡ä»¶å¤„ç†","aria-label":'Permalink to "æ–‡ä»¶å¤„ç†"'},"â€‹")],-1)),s[10]||(s[10]=t("h3",{id:"åˆ†å—-md5-è®¡ç®—",tabindex:"-1"},[a("åˆ†å— MD5 è®¡ç®— "),t("a",{class:"header-anchor",href:"#åˆ†å—-md5-è®¡ç®—","aria-label":'Permalink to "åˆ†å— MD5 è®¡ç®—"'},"â€‹")],-1)),(n(),e(E,null,{default:i(()=>[p(l,{id:"mermaid-280",class:"mermaid",graph:"flowchart%20TD%0A%20%20%20%20A%5B%22%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%94%A8%E4%BA%8E%E8%AE%A1%E7%AE%97MD5%E7%9A%84%E5%AE%9E%E4%BE%8B%E3%80%82%22%5D%20--%3E%20B%5B%22%E6%A0%B9%E6%8D%AE%E6%96%87%E4%BB%B6%E5%A4%A7%E5%B0%8F%E8%AE%A1%E7%AE%97%E5%88%87%E7%89%87%E6%95%B0%E7%9B%AE%E3%80%82%22%5D%0A%20%20%20%20B%20--%3E%20C%5B%22%E4%BD%BF%E7%94%A8%E6%96%87%E4%BB%B6%E8%AF%BB%E5%8F%96%E5%99%A8%EF%BC%8C%E9%80%90%E4%B8%AA%E8%AF%BB%E5%8F%96%E5%88%87%E7%89%87%E5%86%85%E5%AE%B9%E3%80%82%22%5D%0A%20%20%20%20C%20--%3E%20D%5B%22%E5%B0%86%E5%88%87%E7%89%87%E5%86%85%E5%AE%B9%E6%B7%BB%E5%8A%A0%E5%88%B0MD5%E8%AE%A1%E7%AE%97%E5%AE%9E%E4%BE%8B%E4%B8%AD%E3%80%82%22%5D%0A%20%20%20%20D%20--%3E%20E%5B%22%E6%9B%B4%E6%96%B0%E5%BD%93%E5%89%8D%E5%88%87%E7%89%87%E7%B4%A2%E5%BC%95%E3%80%82%22%5D%0A%20%20%20%20E%20--%3E%20F%7B%22%E6%98%AF%E5%90%A6%E8%BF%98%E6%9C%89%E6%9C%AA%E5%A4%84%E7%90%86%E7%9A%84%E5%88%87%E7%89%87%EF%BC%9F%22%7D%0A%20%20%20%20F%20--%3E%7C%22%E6%98%AF%22%7C%20C%0A%20%20%20%20F%20--%3E%7C%22%E5%90%A6%22%7C%20G%5B%22%E5%AE%8C%E6%88%90%E6%89%80%E6%9C%89%E5%88%87%E7%89%87%E7%9A%84MD5%E8%AE%A1%E7%AE%97%EF%BC%8C%E8%8E%B7%E5%8F%96%E8%AE%A1%E7%AE%97%E5%BE%97%E5%88%B0%E7%9A%84MD5%E5%80%BC%E3%80%82%22%5D%0A%20%20%20%20G%20--%3E%20H%5B%22%E6%9B%B4%E6%96%B0%E6%96%87%E4%BB%B6%E7%9A%84MD5%E8%AE%A1%E7%AE%97%E8%BF%9B%E5%BA%A6%E5%92%8C%E7%8A%B6%E6%80%81%E3%80%82%22%5D%0A%20%20%20%20H%20--%3E%20I%5B%22%E5%B0%86%E8%AE%A1%E7%AE%97%E5%BE%97%E5%88%B0%E7%9A%84MD5%E5%80%BC%E4%BF%9D%E5%AD%98%E5%88%B0%E6%96%87%E4%BB%B6%E5%AF%B9%E8%B1%A1%E4%B8%AD%E3%80%82%22%5D%0A%20%20%20%20I%20--%3E%20J%5B%22%E8%BF%94%E5%9B%9E%E6%96%87%E4%BB%B6UID%E4%BD%9C%E4%B8%BAPromise%E7%9A%84%E7%BB%93%E6%9E%9C%E3%80%82%22%5D%0A%0A"})]),fallback:i(()=>s[2]||(s[2]=[a(" Loading... ")])),_:1})),s[11]||(s[11]=h('<div class="tip custom-block"><p class="custom-block-title">ğŸ‰MD5 æµç¨‹ä¸»è¦åŒ…æ‹¬ åˆå§‹åŒ– ã€ è®¡ç®— MD5 å€¼ å’Œ ä¸Šä¼ åˆ†ç‰‡ ä¸‰ä¸ªé˜¶æ®µã€‚</p><p><strong>1.åˆå§‹åŒ–</strong></p><ul><li>è·å–æ–‡ä»¶å¯¹è±¡ï¼šé€šè¿‡ fileItem.file è·å–æ–‡ä»¶å¯¹è±¡ã€‚</li><li>ç¡®å®šåˆ‡ç‰‡æ–¹æ³•ï¼šæ ¹æ®æµè§ˆå™¨å…¼å®¹æ€§ç¡®å®šæ–‡ä»¶åˆ‡ç‰‡æ–¹æ³•ï¼Œå¦‚ File.prototype.sliceã€File.prototype.mozSlice æˆ– File.prototype.webkitSliceã€‚<br></li></ul><p><strong>2.è®¡ç®— MD5 å€¼</strong></p><ul><li>è®¡ç®—åˆ‡ç‰‡æ•°ç›®ï¼šæ ¹æ®æ–‡ä»¶å¤§å°å’Œæ¯ä¸ªåˆ‡ç‰‡çš„å¤§å°è®¡ç®—å‡ºåˆ‡ç‰‡çš„æ€»æ•°ã€‚</li><li>åˆå§‹åŒ–ç´¢å¼•ï¼šå°†å½“å‰å¤„ç†çš„åˆ‡ç‰‡ç´¢å¼• currentChunk åˆå§‹åŒ–ä¸º 0ã€‚</li><li>åˆ›å»º MD5 å®ä¾‹ï¼šä½¿ç”¨ SparkMD5.ArrayBuffer åˆ›å»ºä¸€ä¸ªç”¨äºè®¡ç®— MD5 çš„å®ä¾‹ã€‚</li><li>åˆ›å»ºæ–‡ä»¶è¯»å–å™¨ï¼šä½¿ç”¨ FileReader å¯¹è±¡ç”¨äºè¯»å–æ–‡ä»¶å†…å®¹ã€‚</li><li>è¯»å–å¹¶å¤„ç†åˆ‡ç‰‡ï¼šå®šä¹‰ loadNext å‡½æ•°ï¼Œç”¨äºè¯»å–å½“å‰ç´¢å¼•å¯¹åº”çš„åˆ‡ç‰‡å†…å®¹ï¼Œå¹¶å°†å…¶æ·»åŠ åˆ° MD5 å®ä¾‹ä¸­è¿›è¡Œè®¡ç®—ã€‚ç„¶åæ›´æ–°ç´¢å¼•ï¼Œå¹¶åœ¨è¿˜æœ‰å‰©ä½™åˆ‡ç‰‡çš„æƒ…å†µä¸‹ç»§ç»­è¯»å–ä¸‹ä¸€ä¸ªåˆ‡ç‰‡ã€‚<br></li></ul><p><strong>3.ä¸Šä¼ åˆ†ç‰‡</strong></p><ul><li>è·å–æ–‡ä»¶ UIDï¼šé€šè¿‡ getFileByUid å‡½æ•°æ ¹æ®æ–‡ä»¶çš„ UID è·å–æ–‡ä»¶å¯¹è±¡ã€‚</li><li>ä¸Šä¼ æ–‡ä»¶ï¼šä½¿ç”¨ uploadFile å‡½æ•°ï¼Œæ ¹æ®æ–‡ä»¶çš„ UID å’Œåˆå§‹åˆ†ç‰‡ç´¢å¼•å¼€å§‹ä¸Šä¼ æ–‡ä»¶ã€‚åœ¨å¾ªç¯ä¸­æ£€æŸ¥æ˜¯å¦æœ‰åˆ é™¤æˆ–æš‚åœä¸Šä¼ çš„è¯·æ±‚ï¼Œå¹¶æ ¹æ®åˆ†ç‰‡ç´¢å¼•ä¸Šä¼ æ–‡ä»¶è‡³æœåŠ¡å™¨ã€‚</li><li>æ·»åŠ æ–‡ä»¶åˆ°åˆ—è¡¨ï¼šé€šè¿‡ addFile å‡½æ•°æ¥æ”¶çˆ¶æ–‡ä»¶ä¿¡æ¯ï¼Œåˆ›å»ºæ–‡ä»¶å¯¹è±¡ï¼Œå¹¶è®¡ç®—å…¶ MD5 å€¼åæ·»åŠ åˆ°æ–‡ä»¶åˆ—è¡¨ä¸­ã€‚</li></ul></div><p><code>computeMD5()</code>å‡½æ•°å®ç°ç»†èŠ‚:</p>',2)),(n(),e(E,null,{default:i(()=>[p(l,{id:"mermaid-351",class:"mermaid",graph:"flowchart%20TD%0A%0AStart%5B%22computeMD5(%E6%96%87%E4%BB%B6%E9%A1%B9)%22%5D%0AInitVars%5B%22%E5%88%9D%E5%A7%8B%E5%8C%96%3A%3Cbr%3E%E5%88%86%E5%9D%97%E6%95%B0%20%3D%20%E5%90%91%E4%B8%8A%E5%8F%96%E6%95%B4(%E6%96%87%E4%BB%B6%E5%A4%A7%E5%B0%8F%20%2F%20%E5%88%86%E5%9D%97%E5%A4%A7%E5%B0%8F)%3Cbr%3E%E5%BD%93%E5%89%8D%E5%88%86%E5%9D%97%20%3D%200%3Cbr%3Espark%20%3D%20new%20SparkMD5.ArrayBuffer()%22%5D%0ALoadNext%5B%22%E5%8A%A0%E8%BD%BD%E4%B8%8B%E4%B8%80%E4%B8%AA%E5%88%86%E5%9D%97loadNext()%3Cbr%3E%E8%B5%B7%E5%A7%8B%E4%BD%8D%E7%BD%AE%20%3D%20%E5%BD%93%E5%89%8D%E5%88%86%E5%9D%97%20*%20%E5%88%86%E5%9D%97%E5%A4%A7%E5%B0%8F%3Cbr%3E%E7%BB%93%E6%9D%9F%E4%BD%8D%E7%BD%AE%20%3D%20min(%E8%B5%B7%E5%A7%8B%E4%BD%8D%E7%BD%AE%20%2B%20%E5%88%86%E5%9D%97%E5%A4%A7%E5%B0%8F%2C%20%E6%96%87%E4%BB%B6%E5%A4%A7%E5%B0%8F)%22%5D%0AReadChunk%5B%22fileReader.readAsArrayBuffer(%3Cbr%3E%E6%96%87%E4%BB%B6%E5%88%87%E7%89%87(%E8%B5%B7%E5%A7%8B%E4%BD%8D%E7%BD%AE%2C%20%E7%BB%93%E6%9D%9F%E4%BD%8D%E7%BD%AE))%22%5D%0AOnLoad%5B%22fileReader.onload%3Cbr%3Espark.append(e.target.result)%3Cbr%3E%E5%BD%93%E5%89%8D%E5%88%86%E5%9D%97%2B%2B%22%5D%0ACheckComplete%5B%22%E5%BD%93%E5%89%8D%E5%88%86%E5%9D%97%20%3C%20%E5%88%86%E5%9D%97%E6%95%B0%3F%22%5D%0AUpdateProgress%5B%22%E6%9B%B4%E6%96%B0%20MD5%20%E8%AE%A1%E7%AE%97%E8%BF%9B%E5%BA%A6%3Cbr%3E%3D%20(%E5%BD%93%E5%89%8D%E5%88%86%E5%9D%97%20%2F%20%E5%88%86%E5%9D%97%E6%95%B0)%20*%20100%22%5D%0AFinalize%5B%22md5%20%3D%20spark.end()%3Cbr%3Espark.destroy()%3Cbr%3EMD5%20%E8%AE%A1%E7%AE%97%E8%BF%9B%E5%BA%A6%20%3D%20100%22%5D%0ASetStatus%5B%22%E8%AE%BE%E7%BD%AE%20STATUS.uploading%20%E7%8A%B6%E6%80%81%3Cbr%3E%E5%AD%98%E5%82%A8%20MD5%20%E5%80%BC%22%5D%0A%0A%20%20%20%20Start%20--%3E%20InitVars%0A%20%20%20%20InitVars%20--%3E%20LoadNext%0A%20%20%20%20LoadNext%20--%3E%20ReadChunk%0A%20%20%20%20ReadChunk%20--%3E%20OnLoad%0A%20%20%20%20OnLoad%20--%3E%20CheckComplete%0A%20%20%20%20CheckComplete%20--%3E%7C%E6%98%AF%7C%20UpdateProgress%0A%20%20%20%20UpdateProgress%20--%3E%20LoadNext%0A%20%20%20%20CheckComplete%20--%3E%7C%E5%90%A6%7C%20Finalize%0A%20%20%20%20Finalize%20--%3E%20SetStatus%0A"})]),fallback:i(()=>s[3]||(s[3]=[a(" Loading... ")])),_:1})),s[12]||(s[12]=h(`<div class="tip custom-block"><p class="custom-block-title">ä¸»è¦ç‰¹ç‚¹ï¼š</p><ul><li><strong>åˆ†å—å¤§å°</strong>ï¼šæ¯å— 5MB (<code>chunkSize = 1024 * 1024 * 5</code>)</li><li><strong>å†…å­˜æ•ˆç‡</strong>ï¼šä¸€æ¬¡ä»…å°†ä¸€ä¸ªåˆ†å—åŠ è½½åˆ°å†…å­˜ä¸­</li><li><strong>è¿›åº¦æ›´æ–°</strong>ï¼šå®æ—¶åé¦ˆè¿›åº¦</li><li><strong>è·¨æµè§ˆå™¨å…¼å®¹æ€§</strong>ï¼šæ”¯æŒ <code>slice</code>ã€<code>mozSlice</code>ã€<code>webkitSlice</code></li></ul></div><details class="details custom-block"><summary>ä»£ç å®ç°ï¼š</summary><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// è®¡ç®—æ–‡ä»¶çš„ MD5 å€¼</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ä¼šå¯¹å¤§æ–‡ä»¶è¿›è¡Œåˆ†ç‰‡å¤„ç†</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> computeMD5</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">fileItem</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> file </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fileItem.file</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // slice åˆ†å‰²æ–‡ä»¶</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // mozSlice å…¼å®¹firefox</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // webkitSlice å…¼å®¹webkit</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> blobSlice </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> File</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">prototype</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.slice </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> File</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">prototype</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.mozSlice </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> File</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">prototype</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.webkitSlice</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // chunkSize æ¯ç‰‡çš„å¤§å°</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // chunks åˆ‡ç‰‡æ•°é‡(å‘ä¸Šå–æ•´)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chunks </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Math.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ceil</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(file.size </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chunkSize)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // å½“å‰åˆ‡ç‰‡çš„ä¸‹æ ‡ä¸º0</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> currentChunk </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // åˆ›å»ºSparkMD5çš„å®ä¾‹</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> spark </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SparkMD5.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ArrayBuffer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // ä½¿ç”¨ FileReader è¯»å–æ–‡ä»¶çš„æ•°æ®</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fileReader </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> FileReader</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // åŠ è½½æ–‡ä»¶çš„ä¸‹ä¸€ä¸ªæ•°æ®å—ã€‚</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  let</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> loadNext</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> start </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> currentChunk </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chunkSize</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> end </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> start </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chunkSize </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> file.size </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> file.size </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> start </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chunkSize</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    fileReader.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">readAsArrayBuffer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(blobSlice.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">call</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(file, start, end)) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//callæ–¹æ³•æŠŠthisæŒ‡å‘fileï¼ŒåŒæ—¶ä¼ é€’åŠ è½½å—çš„å¼€å§‹å’Œç»“æŸä½ç½®å‚æ•°</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  loadNext</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">reject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // æ ¹æ®çœŸå®æ–‡ä»¶IDè·å–åˆ°å¯¹åº”çš„åŒ…è£…åçš„æ–‡ä»¶å¯¹è±¡ï¼ˆåŒ…å«äº†è‡ªå®šä¹‰çš„é¢å¤–å±æ€§md5Progress...ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    //ç¡®ä¿æ“ä½œçš„æ˜¯Vueå“åº”å¼ç³»ç»Ÿï¼ˆfileListï¼‰ä¸­çš„å¯¹è±¡ï¼ˆçŠ¶æ€å˜åŒ–èƒ½åŠæ—¶åæ˜ åœ¨UIç•Œé¢ä¸Šï¼‰</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // è€Œéä»…å€¼ç›¸åŒçš„ä¸åŒå¯¹è±¡ï¼ˆç›´æ¥å–ä¼ å…¥å‚æ•°fileItemä¸æ˜¯å“åº”å¼å¯¹è±¡ï¼Œæ·»åŠ å±æ€§æ— æ³•è®©é¡µé¢å˜åŒ–ï¼‰ï¼Œé¿å…æ½œåœ¨çš„Bug</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> resultFile </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getFileByUid</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(file.uid)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // å½“è¯»å–æ“ä½œæˆåŠŸå®Œæˆæ—¶è°ƒç”¨</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    fileReader.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">onload</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">e</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // å‘SparkMD5å®ä¾‹ä¸­æ·»åŠ æ•°æ®</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // åˆ†åˆ«è®¡ç®—åˆ†ç‰‡åçš„MD5å€¼</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // e.target.resultæ˜¯ä¸€ä¸ªArrayBufferå¯¹è±¡ï¼ŒåŒ…å«äº†æ–‡ä»¶åˆ‡ç‰‡çš„å†…å®¹</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      //ä¸éœ€è¦ä¿å­˜æ‰€æœ‰æ•°æ®å—,è®¡ç®—å®Œçš„æ•°æ®å¯ä»¥é‡Šæ”¾,å¯ä»¥å¤„ç†è¶…è¿‡å†…å­˜å¤§å°çš„æ–‡ä»¶,å¯ä»¥æ˜¾ç¤ºå¤„ç†è¿›åº¦</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      spark.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">append</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(e.target.result) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Append array buffer</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // åˆ‡ç‰‡ä¸‹æ ‡+1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      currentChunk</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // å¦‚æœå½“å‰åˆ‡ç‰‡ä¸‹æ ‡æ¯”åˆ‡ç‰‡æ•°é‡å°,è¯´æ˜è¿˜å¯ä»¥åˆ†ç‰‡è§£æ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (currentChunk </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chunks) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> percent </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Math.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">floor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((currentChunk </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chunks) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        resultFile.md5Progress </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> percent</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // å†æ¬¡è¯»å–æ•°æ®</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        loadNext</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // å¦‚æœå½“å‰åˆ‡ç‰‡ä¸‹æ ‡ä¸æ¯”åˆ‡ç‰‡æ•°é‡å°,è¯´æ˜è§£æåˆ°æœ€åäº†</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        //å®Œæ•´çš„MD5å€¼éœ€è¦ç­‰åˆ°æ‰€æœ‰æ•°æ®å—éƒ½å¤„ç†å®Œæˆåï¼Œé€šè¿‡spark.end()æ‰èƒ½å¾—åˆ°</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> md5 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> spark.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">end</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        spark.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">destroy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//é‡Šæ”¾ç¼“å­˜</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        resultFile.md5Progress </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 100</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        resultFile.status </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> STATUS</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.uploading.value </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//çŠ¶æ€ç”±åˆå§‹åŒ–å˜æˆä¸Šä¼ ä¸­</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        resultFile.md5 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> md5</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(fileItem.uid)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // å½“è¯»å–æ“ä½œå‘ç”Ÿé”™è¯¯æ—¶è°ƒç”¨</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    fileReader.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">onerror</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      resultFile.md5Progress </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> -</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      resultFile.status </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> STATUS</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.fail.value</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(fileItem.uid)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æ ¹æ®æ–‡ä»¶IDè·å–åˆ°æ–‡ä»¶</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getFileByUid</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">uid</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> file </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fileList.value.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">find</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">item</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> item.file.uid </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> uid</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  })</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> file</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br></div></div></details><h3 id="åˆ†å—ä¸Šä¼ æµç¨‹" tabindex="-1">åˆ†å—ä¸Šä¼ æµç¨‹ <a class="header-anchor" href="#åˆ†å—ä¸Šä¼ æµç¨‹" aria-label="Permalink to &quot;åˆ†å—ä¸Šä¼ æµç¨‹&quot;">â€‹</a></h3>`,3)),(n(),e(E,null,{default:i(()=>[p(l,{id:"mermaid-382",class:"mermaid",graph:"flowchart%20TD%0A%20%20%20%20A%5B%22%E5%87%BD%E6%95%B0%E6%8E%A5%E5%8F%97%E6%96%87%E4%BB%B6uid%E5%92%8C%E5%88%87%E7%89%87%E8%B5%B7%E5%A7%8B%E4%BD%8D%E7%BD%AEchunkIndex%E3%80%82%22%5D%20--%3E%20B%5B%22%E8%8E%B7%E5%8F%96%E6%96%87%E4%BB%B6%E5%AF%B9%E8%B1%A1%E3%80%81%E6%96%87%E4%BB%B6%E5%A4%A7%E5%B0%8F%E5%92%8C%E5%88%87%E7%89%87%E6%95%B0%E7%9B%AE%E3%80%82%22%5D%0A%20%20%20%20B%20--%3E%20C%5B%22%E5%BE%AA%E7%8E%AF%E9%81%8D%E5%8E%86%E6%AF%8F%E4%B8%AA%E5%88%87%E7%89%87%E3%80%82%22%5D%0A%20%20%20%20C%20--%3E%20D%5B%22%E6%A3%80%E6%9F%A5%E6%98%AF%E5%90%A6%E6%9C%89%E5%88%A0%E9%99%A4%E6%93%8D%E4%BD%9C%EF%BC%8C%E8%8B%A5%E6%9C%89%E5%88%99%E4%B8%AD%E6%96%AD%E4%B8%8A%E4%BC%A0%E3%80%82%22%5D%0A%20%20%20%20D%20--%3E%20E%5B%22%E6%A3%80%E6%9F%A5%E6%98%AF%E5%90%A6%E6%9A%82%E5%81%9C%E4%B8%8A%E4%BC%A0%EF%BC%8C%E8%8B%A5%E6%98%AF%E5%88%99%E4%B8%AD%E6%96%AD%E4%B8%8A%E4%BC%A0%E3%80%82%22%5D%0A%20%20%20%20E%20--%3E%20F%5B%22%E8%AE%A1%E7%AE%97%E5%BD%93%E5%89%8D%E5%88%87%E7%89%87%E7%9A%84%E8%B5%B7%E5%A7%8B%E5%92%8C%E7%BB%93%E6%9D%9F%E4%BD%8D%E7%BD%AE%E3%80%82%22%5D%0A%20%20%20%20F%20--%3E%20G%5B%22%E8%8E%B7%E5%8F%96%E5%BD%93%E5%89%8D%E5%88%87%E7%89%87%E7%9A%84%E6%96%87%E4%BB%B6%E5%AF%B9%E8%B1%A1%E3%80%82%22%5D%0A%20%20%20%20G%20--%3E%20H%5B%22%E5%8F%91%E8%B5%B7%E4%B8%8A%E4%BC%A0%E8%AF%B7%E6%B1%82%EF%BC%8C%E4%BC%A0%E9%80%92%E5%88%87%E7%89%87%E5%8F%8A%E7%9B%B8%E5%85%B3%E5%8F%82%E6%95%B0%E3%80%82%22%5D%0A%20%20%20%20H%20--%3E%20I%5B%22%E7%9B%91%E5%90%AC%E4%B8%8A%E4%BC%A0%E8%BF%9B%E5%BA%A6%EF%BC%8C%E6%9B%B4%E6%96%B0%E5%B7%B2%E4%B8%8A%E4%BC%A0%E5%A4%A7%E5%B0%8F%E5%92%8C%E8%BF%9B%E5%BA%A6%E7%99%BE%E5%88%86%E6%AF%94%E3%80%82%22%5D%0A%20%20%20%20I%20--%3E%20J%5B%22%E5%A6%82%E6%9E%9C%E4%B8%8A%E4%BC%A0%E6%88%90%E5%8A%9F%EF%BC%8C%E6%9B%B4%E6%96%B0%E6%96%87%E4%BB%B6ID%E5%92%8C%E7%8A%B6%E6%80%81%E3%80%82%22%5D%0A%20%20%20%20J%20--%3E%20K%5B%22%E5%A6%82%E6%9E%9C%E4%B8%8A%E4%BC%A0%E7%8A%B6%E6%80%81%E4%B8%BA%E7%A7%92%E4%BC%A0%E6%88%96%E4%B8%8A%E4%BC%A0%E5%AE%8C%E6%88%90%EF%BC%8C%E8%AE%BE%E7%BD%AE%E4%B8%8A%E4%BC%A0%E8%BF%9B%E5%BA%A6%E4%B8%BA100%EF%BC%8C%E5%B9%B6%E8%A7%A6%E5%8F%91%E4%B8%8A%E4%BC%A0%E5%9B%9E%E8%B0%83%E3%80%82%22%5D%0A%20%20%20%20K%20--%3E%20L%5B%22%E7%BB%A7%E7%BB%AD%E5%BE%AA%E7%8E%AF%EF%BC%8C%E4%B8%8A%E4%BC%A0%E4%B8%8B%E4%B8%80%E4%B8%AA%E5%88%87%E7%89%87%E3%80%82%22%5D%0A%20%20%20%20L%20--%3E%20M%7B%22%E5%BE%AA%E7%8E%AF%E6%98%AF%E5%90%A6%E7%BB%93%E6%9D%9F%EF%BC%9F%22%7D%0A%20%20%20%20M%20--%3E%7C%22%E6%98%AF%22%7C%20N%5B%22%E4%B8%8A%E4%BC%A0%E5%AE%8C%E6%88%90%E6%88%96%E4%B8%AD%E9%80%94%E4%B8%AD%E6%96%AD%E4%B8%8A%E4%BC%A0%E3%80%82%22%5D%0A%20%20%20%20M%20--%3E%7C%22%E5%90%A6%22%7C%20C%0A"})]),fallback:i(()=>s[4]||(s[4]=[a(" Loading... ")])),_:1})),s[13]||(s[13]=h('<div class="tip custom-block"><p class="custom-block-title">ä¸Šä¼ æµç¨‹ä¸»è¦åŒ…æ‹¬ <code>åˆ†ç‰‡ä¸Šä¼ </code> å’Œ <code>æ›´æ–°çŠ¶æ€</code> ä¸¤ä¸ªé˜¶æ®µã€‚</p><p><strong>1.åˆ†ç‰‡ä¸Šä¼ </strong></p><ul><li>ä» chunkIndex å¼€å§‹å¾ªç¯ä¸Šä¼ åˆ‡ç‰‡ï¼Œåˆ¤æ–­åˆ é™¤/æš‚åœæ“ä½œï¼Œç»§ç»­ä¸Šä¼ ï¼ˆæœ¬åœ°ï¼‰</li><li>è·å–åˆ‡ç‰‡çš„æ–‡ä»¶å¯¹è±¡åè°ƒç”¨ä¸Šä¼ å‡½æ•°</li><li>ä½¿ç”¨ proxy.Request å‘é€ä¸Šä¼ è¯·æ±‚ï¼Œä¸Šä¼ å½“å‰åˆ‡ç‰‡ chunkFileã€‚</li><li>åœ¨ uploadProgressCallback ä¸­æ›´æ–°å·²ä¸Šä¼ çš„å¤§å°å’Œä¸Šä¼ è¿›åº¦ç™¾åˆ†æ¯”ã€‚<br></li></ul><p><strong>2.æ›´æ–°çŠ¶æ€</strong></p><ul><li>å¦‚æœä¸Šä¼ ç»“æœä¸ºç©ºï¼Œåˆ™ä¸­æ–­ä¸Šä¼ ã€‚</li><li>æ›´æ–°æ–‡ä»¶çš„ fileId å’ŒçŠ¶æ€ statusã€‚</li><li>æ›´æ–°å½“å‰åˆ‡ç‰‡çš„ç´¢å¼• chunkIndexã€‚<br></li><li>æ£€æŸ¥ä¸Šä¼ çŠ¶æ€ï¼šå¦‚æœä¸Šä¼ çŠ¶æ€ä¸ºç§’ä¼ æˆ–ä¸Šä¼ å®Œæˆï¼Œæ›´æ–°ä¸Šä¼ è¿›åº¦ä¸º 100% å¹¶è§¦å‘ä¸Šä¼ å›è°ƒ emit(&quot;uploadCallback&quot;)ï¼Œç„¶åä¸­æ–­ä¸Šä¼ ã€‚</li></ul></div><p><code>uploadFile()</code> å‡½æ•°é€šè¿‡é¡ºåºå¤„ç†åˆ†å—æ¥å¤„ç†å®é™…ä¸Šä¼ ï¼š</p>',2)),(n(),e(E,null,{default:i(()=>[p(l,{id:"mermaid-438",class:"mermaid",graph:"flowchart%20TD%0A%0AStartUpload%5B%22uploadFile(uid%2C%20%E5%88%86%E5%9D%97%E7%B4%A2%E5%BC%95)%22%5D%0AInitLoop%5B%22%E5%BE%AA%E7%8E%AF%20(i%20%3D%20%E5%88%86%E5%9D%97%E7%B4%A2%E5%BC%95%3B%20i%20%3C%20%E5%88%86%E5%9D%97%E6%95%B0%3B%20i%2B%2B)%22%5D%0ACheckDeleted%5B%22%E6%96%87%E4%BB%B6%E6%98%AF%E5%90%A6%E5%9C%A8%E5%88%A0%E9%99%A4%E5%88%97%E8%A1%A8%E4%B8%AD%3F%22%5D%0ACancelUpload%5B%22%E4%BB%8E%E5%88%A0%E9%99%A4%E5%88%97%E8%A1%A8%E4%B8%AD%E7%A7%BB%E9%99%A4%EF%BC%8C%3Cbr%3E%E6%98%BE%E7%A4%BA%20'%E4%B8%8A%E4%BC%A0%E5%B7%B2%E5%8F%96%E6%B6%88'%3Cbr%3E%E8%B7%B3%E5%87%BA%E5%BE%AA%E7%8E%AF%22%5D%0ACheckPaused%5B%22%E6%96%87%E4%BB%B6%E6%98%AF%E5%90%A6%E6%9A%82%E5%81%9C%3F%22%5D%0APauseUpload%5B%22%E6%98%BE%E7%A4%BA%20'%E4%B8%8A%E4%BC%A0%E5%B7%B2%E6%9A%82%E5%81%9C'%3Cbr%3E%E8%B7%B3%E5%87%BA%E5%BE%AA%E7%8E%AF%22%5D%0ACreateChunk%5B%22%E5%88%86%E5%9D%97%E6%96%87%E4%BB%B6%20%3D%20%E6%96%87%E4%BB%B6%E5%88%87%E7%89%87(%E8%B5%B7%E5%A7%8B%E4%BD%8D%E7%BD%AE%2C%20%E7%BB%93%E6%9D%9F%E4%BD%8D%E7%BD%AE)%3Cbr%3E%E8%B5%B7%E5%A7%8B%E4%BD%8D%E7%BD%AE%20%3D%20i%20*%20%E5%88%86%E5%9D%97%E5%A4%A7%E5%B0%8F%3Cbr%3E%E7%BB%93%E6%9D%9F%E4%BD%8D%E7%BD%AE%20%3D%20min(%E8%B5%B7%E5%A7%8B%E4%BD%8D%E7%BD%AE%20%2B%20%E5%88%86%E5%9D%97%E5%A4%A7%E5%B0%8F%2C%20%E6%96%87%E4%BB%B6%E5%A4%A7%E5%B0%8F)%22%5D%0AAPICall%5B%22%E8%AF%B7%E6%B1%82%20POST%20%2Ffile%2FuploadFile%3Cbr%3E%E5%8F%82%E6%95%B0%3A%20%7B%E6%96%87%E4%BB%B6%3A%20%E5%88%86%E5%9D%97%E6%96%87%E4%BB%B6%2C%20%E6%96%87%E4%BB%B6%20ID%2C%20%E7%88%B6%E6%96%87%E4%BB%B6%E5%A4%B9%20ID%2C%3Cbr%3E%E6%96%87%E4%BB%B6%E5%90%8D%2C%20%E6%96%87%E4%BB%B6%20MD5%2C%20%E5%88%86%E5%9D%97%E7%B4%A2%E5%BC%95%3A%20i%2C%20%E5%88%86%E5%9D%97%E6%80%BB%E6%95%B0%7D%22%5D%0AProgressUpdate%5B%22%E4%B8%8A%E4%BC%A0%E8%BF%9B%E5%BA%A6%E5%9B%9E%E8%B0%83%3A%3Cbr%3E%E5%B7%B2%E4%B8%8A%E4%BC%A0%E5%A4%A7%E5%B0%8F%20%3D%20i%20*%20%E5%88%86%E5%9D%97%E5%A4%A7%E5%B0%8F%20%2B%20%E5%B7%B2%E5%8A%A0%E8%BD%BD%E5%AD%97%E8%8A%82%E6%95%B0%3Cbr%3E%E4%B8%8A%E4%BC%A0%E8%BF%9B%E5%BA%A6%20%3D%20(%E5%B7%B2%E4%B8%8A%E4%BC%A0%E5%A4%A7%E5%B0%8F%20%2F%20%E6%96%87%E4%BB%B6%E5%A4%A7%E5%B0%8F)%20*%20100%22%5D%0ACheckResponse%5B%22%E5%93%8D%E5%BA%94%E7%8A%B6%E6%80%81%3F%22%5D%0AComplete%5B%22%E4%B8%8A%E4%BC%A0%E8%BF%9B%E5%BA%A6%20%3D%20100%3Cbr%3E%E8%A7%A6%E5%8F%91('%E4%B8%8A%E4%BC%A0%E5%9B%9E%E8%B0%83')%3Cbr%3E%E8%B7%B3%E5%87%BA%E5%BE%AA%E7%8E%AF%22%5D%0ANextChunk%5B%22%E5%88%86%E5%9D%97%E7%B4%A2%E5%BC%95%20%3D%20i%3Cbr%3E%E7%BB%A7%E7%BB%AD%E5%BE%AA%E7%8E%AF%22%5D%0AHandleError%5B%22%E7%8A%B6%E6%80%81%20%3D%20STATUS.fail%3Cbr%3E%E9%94%99%E8%AF%AF%E4%BF%A1%E6%81%AF%20%3D%20%E5%93%8D%E5%BA%94%E5%86%85%E5%AE%B9%22%5D%0A%0A%20%20%20%20StartUpload%20--%3E%20InitLoop%0A%20%20%20%20InitLoop%20--%3E%20CheckDeleted%0A%20%20%20%20CheckDeleted%20--%3E%7C%E6%98%AF%7C%20CancelUpload%0A%20%20%20%20CheckDeleted%20--%3E%7C%E5%90%A6%7C%20CheckPaused%0A%20%20%20%20CheckPaused%20--%3E%7C%E6%98%AF%7C%20PauseUpload%0A%20%20%20%20CheckPaused%20--%3E%7C%E5%90%A6%7C%20CreateChunk%0A%20%20%20%20CreateChunk%20--%3E%20APICall%0A%20%20%20%20APICall%20--%3E%20ProgressUpdate%0A%20%20%20%20APICall%20--%3E%20CheckResponse%0A%20%20%20%20CheckResponse%20--%3E%20Complete%0A%20%20%20%20CheckResponse%20--%3E%7C%E7%BB%A7%E7%BB%AD%7C%20NextChunk%0A%20%20%20%20NextChunk%20--%3E%20InitLoop%0A%20%20%20%20CheckResponse%20--%3E%20HandleError%0A"})]),fallback:i(()=>s[5]||(s[5]=[a(" Loading... ")])),_:1})),s[14]||(s[14]=h(`<details class="details custom-block"><summary>ä»£ç å®ç°</summary><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//ä¸Šä¼ æ–‡ä»¶</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> uploadFile</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> async</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">uid</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">chunkIndex</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  chunkIndex </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chunkIndex </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chunkIndex </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> currentFile </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getFileByUid</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(uid)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> fileSize</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> currentFile.totalSize</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> file</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> currentFile.file</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> chunks</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Math.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ceil</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(fileSize </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chunkSize)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chunkIndex; i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chunks; i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> delIndex </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> delList.value.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">indexOf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(uid)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (delIndex </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> -</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      //åœ¨åˆ é™¤åˆ—è¡¨æ‰¾åˆ°äº†è¯¥æ–‡ä»¶çš„idï¼Œè¯´æ˜è¯¥æ–‡ä»¶è¢«åˆ é™¤äº†ï¼Œè·³å‡ºå¾ªç¯å–æ¶ˆä¸Šä¼ </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      delList.value.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">splice</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(delIndex, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      proxy.Message.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;å·²å–æ¶ˆä¸Šä¼ &#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      break</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    currentFile </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getFileByUid</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(uid)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (currentFile.pause) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      proxy.Message.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;å·²æš‚åœä¸Šä¼ &#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      break</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    //å¼€å§‹ä¸Šä¼ æ“ä½œ(åˆ†ç‰‡ä¸Šä¼ )</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> start </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chunkSize</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> end </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> start </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chunkSize </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fileSize </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fileSize </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> start </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chunkSize</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chunkFile </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> file.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">slice</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(start, end)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> uploadResult </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> proxy.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      url: api.upload,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      params: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        file: chunkFile,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        fileId: currentFile.fileId, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//æœåŠ¡ç«¯è¿”å›çš„ç‹¬ä¸€æ— äºŒçš„idï¼Œä¸ç”¨å‰ç«¯elmentçš„uidï¼ˆå¯èƒ½ä¼šé‡ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        filePid: currentFile.filePid,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        fileName: currentFile.fileName,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        fileMd5: currentFile.md5,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        chunkIndex: i,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        chunks: chunks,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      showLoading: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      dataType: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;file&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      showError: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // æŠ¥é”™</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      errorCallback</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">errorMsg</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        currentFile.status </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> STATUS</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.fail.value</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        currentFile.errorMsg </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> errorMsg</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      },</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      //æ˜¾ç¤ºè¿›åº¦</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      uploadProgressCallback</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        //å½“å‰åˆ†ç‰‡å·²ç»è¢«æµè§ˆå™¨æˆåŠŸä¸Šä¼ çš„éƒ¨åˆ†</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> loaded </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> event.loaded</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (loaded </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fileSize) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          loaded </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fileSize</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        currentFile.uploadSize </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chunkSize </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> loaded </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//å‰é¢å·²ä¸Šä¼ çš„+å½“å‰å·²ä¸Šä¼ </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        currentFile.uploadProgress </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Math.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">floor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((currentFile.uploadSize </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fileSize) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    })</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    //å¯¹è¯·æ±‚è¿”å›ç»“æœåšå¤„ç†</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (uploadResult </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      break</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    currentFile.fileId </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> uploadResult.data.fileId</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    currentFile.status </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> STATUS</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[uploadResult.data.status].value</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    //å·²æˆåŠŸä¸Šä¼ çš„åˆ†ç‰‡ä¸‹æ ‡å·</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    currentFile.chunkIndex </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      uploadResult.data.status </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> STATUS</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.upload_seconds.value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      uploadResult.data.status </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> STATUS</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.upload_finish.value</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      currentFile.uploadProgress </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 100</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // ä¸Šä¼ ç»“æŸå,è§¦å‘uploaderCallback,å°†Franmeworkä¸­çš„åˆ—è¡¨åˆ·æ–°</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      emit</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;uploadCallback&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      break</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br></div></div></details><h2 id="ä¸Šä¼ æ§åˆ¶" tabindex="-1">ä¸Šä¼ æ§åˆ¶ <a class="header-anchor" href="#ä¸Šä¼ æ§åˆ¶" aria-label="Permalink to &quot;ä¸Šä¼ æ§åˆ¶&quot;">â€‹</a></h2><h3 id="æš‚åœå’Œæ¢å¤åŠŸèƒ½" tabindex="-1">æš‚åœå’Œæ¢å¤åŠŸèƒ½ <a class="header-anchor" href="#æš‚åœå’Œæ¢å¤åŠŸèƒ½" aria-label="Permalink to &quot;æš‚åœå’Œæ¢å¤åŠŸèƒ½&quot;">â€‹</a></h3><p>ç³»ç»Ÿæä¾›å¯¹ä¸Šä¼ æ“ä½œçš„ç²¾ç»†æ§åˆ¶ï¼š</p><table tabindex="0"><thead><tr><th>å‡½æ•°</th><th>ç”¨é€”</th><th>å®ç°æ–¹å¼</th></tr></thead><tbody><tr><td><code>pauseUpload(uid)</code></td><td>æš‚åœæ­£åœ¨è¿›è¡Œçš„ä¸Šä¼ </td><td>è®¾ç½® <code>fileItem.pause = true</code></td></tr><tr><td><code>startUpload(uid)</code></td><td>æ¢å¤æš‚åœçš„ä¸Šä¼ </td><td>è®¾ç½® <code>pause = false</code>ï¼Œä» <code>chunkIndex + 1</code> ç»§ç»­ä¸Šä¼ </td></tr><tr><td><code>delUpload(uid, index)</code></td><td>å–æ¶ˆ/ç§»é™¤ä¸Šä¼ </td><td>å°† <code>uid</code> æ·»åŠ åˆ° <code>delList</code>ï¼Œä» <code>fileList</code> ä¸­ç§»é™¤</td></tr></tbody></table><p>æš‚åœ/æ¢å¤æœºåˆ¶çš„å·¥ä½œåŸç†å¦‚ä¸‹ï¼š</p><ol><li><strong>æš‚åœ</strong>ï¼šè®¾ç½®ä¸€ä¸ªæ ‡å¿—ï¼Œä¸­æ–­ä¸Šä¼ å¾ªç¯</li><li><strong>æ¢å¤</strong>ï¼šä»æœ€åä¸€ä¸ªæˆåŠŸä¸Šä¼ çš„åˆ†å—ç»§ç»­ä¸Šä¼ </li><li><strong>å–æ¶ˆ</strong>ï¼šæ·»åŠ åˆ°åˆ é™¤åˆ—è¡¨ï¼Œåœ¨ä¸‹ä¸€æ¬¡è¿­ä»£æ—¶å–æ¶ˆä¸Šä¼ </li></ol><h2 id="api-é›†æˆ" tabindex="-1">API é›†æˆ <a class="header-anchor" href="#api-é›†æˆ" aria-label="Permalink to &quot;API é›†æˆ&quot;">â€‹</a></h2><h3 id="ä¸Šä¼ ç«¯ç‚¹é€šä¿¡" tabindex="-1">ä¸Šä¼ ç«¯ç‚¹é€šä¿¡ <a class="header-anchor" href="#ä¸Šä¼ ç«¯ç‚¹é€šä¿¡" aria-label="Permalink to &quot;ä¸Šä¼ ç«¯ç‚¹é€šä¿¡&quot;">â€‹</a></h3><p>ç³»ç»Ÿé€šè¿‡é›†ä¸­çš„ <code>Request.js</code> å®¢æˆ·ç«¯ä¸ <code>/file/uploadFile</code> ç«¯ç‚¹è¿›è¡Œé€šä¿¡ï¼š</p><div class="language-yaml vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">// æ¯ä¸ªåˆ†å—çš„è¯·æ±‚å‚æ•°</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">params</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  file</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">chunkFile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,           </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">// äºŒè¿›åˆ¶åˆ†å—æ•°æ®</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  fileId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">currentFile.fileId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">// æœåŠ¡å™¨åˆ†é…çš„å”¯ä¸€ ID</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  filePid</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">currentFile.filePid</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">// çˆ¶æ–‡ä»¶å¤¹ ID</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  fileName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">currentFile.fileName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">// åŸå§‹æ–‡ä»¶å</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  fileMd5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">currentFile.md5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,   </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">// å®Œæ•´æ–‡ä»¶çš„ MD5 å“ˆå¸Œå€¼</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  chunkIndex</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">i</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,             </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">// å½“å‰åˆ†å—ç´¢å¼•ï¼ˆä» 0 å¼€å§‹ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  chunks</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">chunks             // åˆ†å—æ€»æ•°</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="è¿›åº¦è·Ÿè¸ªé›†æˆ" tabindex="-1">è¿›åº¦è·Ÿè¸ªé›†æˆ <a class="header-anchor" href="#è¿›åº¦è·Ÿè¸ªé›†æˆ" aria-label="Permalink to &quot;è¿›åº¦è·Ÿè¸ªé›†æˆ&quot;">â€‹</a></h3><p>ä¸Šä¼ è¿›åº¦é€šè¿‡ <code>uploadProgressCallback</code> è¿›è¡Œè·Ÿè¸ªï¼š</p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">uploadProgressCallback</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> loaded </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> event.loaded </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å½“å‰åˆ†å—å·²ä¸Šä¼ çš„å­—èŠ‚æ•°</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (loaded </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fileSize) loaded </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fileSize</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // æ€»ä¸Šä¼ é‡ = ä¹‹å‰çš„åˆ†å— + å½“å‰åˆ†å—çš„è¿›åº¦</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  currentFile.uploadSize </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chunkSize </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> loaded</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  currentFile.uploadProgress </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Math.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">floor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((currentFile.uploadSize </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fileSize) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="ç”¨æˆ·ç•Œé¢ç»„ä»¶" tabindex="-1">ç”¨æˆ·ç•Œé¢ç»„ä»¶ <a class="header-anchor" href="#ç”¨æˆ·ç•Œé¢ç»„ä»¶" aria-label="Permalink to &quot;ç”¨æˆ·ç•Œé¢ç»„ä»¶&quot;">â€‹</a></h2><h3 id="ä¸Šä¼ é˜Ÿåˆ—æ˜¾ç¤º" tabindex="-1">ä¸Šä¼ é˜Ÿåˆ—æ˜¾ç¤º <a class="header-anchor" href="#ä¸Šä¼ é˜Ÿåˆ—æ˜¾ç¤º" aria-label="Permalink to &quot;ä¸Šä¼ é˜Ÿåˆ—æ˜¾ç¤º&quot;">â€‹</a></h3><p>è¯¥ç»„ä»¶ä»¥å¯æ»šåŠ¨åˆ—è¡¨çš„å½¢å¼å‘ˆç°ä¸Šä¼ ä»»åŠ¡ï¼Œåˆ—è¡¨è¡Œé¢œè‰²äº¤æ›¿æ˜¾ç¤ºï¼š</p><ul><li><strong>æ–‡ä»¶ä¿¡æ¯</strong>ï¼šåç§°ã€å¤§å°ã€è¿›åº¦æ¡</li><li><strong>çŠ¶æ€æŒ‡ç¤ºå™¨</strong>ï¼šå›¾æ ‡å’Œæ–‡æœ¬ï¼Œå¸¦æœ‰é¢œè‰²ç¼–ç </li><li><strong>æ§åˆ¶æŒ‰é’®</strong>ï¼šæ ¹æ®çŠ¶æ€æ˜¾ç¤ºæš‚åœ/æ¢å¤ã€åˆ é™¤/æ¸…ç†æŒ‰é’®</li><li><strong>è¿›åº¦æ˜¾ç¤º</strong>ï¼šMD5 è®¡ç®—ä½¿ç”¨åœ†å½¢è¿›åº¦æ¡ï¼Œä¸Šä¼ ä½¿ç”¨çº¿æ€§è¿›åº¦æ¡</li></ul><h3 id="å¯è§†åŒ–çŠ¶æ€æŒ‡ç¤ºå™¨" tabindex="-1">å¯è§†åŒ–çŠ¶æ€æŒ‡ç¤ºå™¨ <a class="header-anchor" href="#å¯è§†åŒ–çŠ¶æ€æŒ‡ç¤ºå™¨" aria-label="Permalink to &quot;å¯è§†åŒ–çŠ¶æ€æŒ‡ç¤ºå™¨&quot;">â€‹</a></h3><p>æ¯ä¸ªä¸Šä¼ çŠ¶æ€éƒ½æœ‰ç‹¬ç‰¹çš„å¯è§†åŒ–è¡¨ç¤ºï¼š</p>`,20)),(n(),e(E,null,{default:i(()=>[p(l,{id:"mermaid-575",class:"mermaid",graph:"flowchart%20TD%0A%0AIcon%5B%22%E5%9B%BE%E6%A0%87%E5%AD%97%E4%BD%93%20icon-%7B%E7%8A%B6%E6%80%81%E5%9B%BE%E6%A0%87%7D%22%5D%0AText%5B%22%E7%8A%B6%E6%80%81%E6%8F%8F%E8%BF%B0%22%5D%0AProgress%5B%22%E8%BF%9B%E5%BA%A6%E6%8C%87%E7%A4%BA%E5%99%A8%22%5D%0AControls%5B%22%E6%93%8D%E4%BD%9C%E6%8C%89%E9%92%AE%22%5D%0AInit%5B%22MD5%20%E8%AE%A1%E7%AE%97%E8%BF%9B%E5%BA%A6%3Cbr%3Eel-progress%20%E5%9C%86%E5%BD%A2%E8%BF%9B%E5%BA%A6%E6%9D%A1%22%5D%0AUploading%5B%22%E6%9A%82%E5%81%9C%2F%E4%B8%8A%E4%BC%A0%E6%8C%89%E9%92%AE%3Cbr%3E%E4%B8%8A%E4%BC%A0%E8%BF%9B%E5%BA%A6%E6%9D%A1%22%5D%0AComplete%5B%22%E6%B8%85%E7%90%86%E6%8C%89%E9%92%AE%3Cbr%3E100%25%20%E8%BF%9B%E5%BA%A6%22%5D%0AFailed%5B%22%E5%88%A0%E9%99%A4%E6%8C%89%E9%92%AE%3Cbr%3E%E9%94%99%E8%AF%AF%E4%BF%A1%E6%81%AF%22%5D%0A%0A%20%20%20%20Icon%20--%3E%20Init%0A%20%20%20%20Text%20--%3E%20Uploading%0A%20%20%20%20Progress%20--%3E%20Complete%0A%20%20%20%20Controls%20--%3E%20Failed%0Asubgraph%20StateDependent_Controls%20%5B%22%E7%8A%B6%E6%80%81%E7%9B%B8%E5%85%B3%E6%8E%A7%E5%88%B6%22%5D%0A%20%20%20%20Init%0A%20%20%20%20Uploading%0A%20%20%20%20Complete%0A%20%20%20%20Failed%0Aend%0A%0Asubgraph%20Status_Display_Elements%20%5B%22%E7%8A%B6%E6%80%81%E6%98%BE%E7%A4%BA%E5%85%83%E7%B4%A0%22%5D%0A%20%20%20%20Icon%0A%20%20%20%20Text%0A%20%20%20%20Progress%0A%20%20%20%20Controls%0Aend%0A"})]),fallback:i(()=>s[6]||(s[6]=[a(" Loading... ")])),_:1}))])}const D=k(A,[["render",B]]);export{b as __pageData,D as default};
