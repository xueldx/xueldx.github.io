import{_ as h,C as n,c as d,o as e,a8 as s,b as i,j as l,w as a,a as r,G as t,a9 as B}from"./chunks/framework.DW4T_yAZ.js";const F=JSON.parse('{"title":"文件共享","description":"","frontmatter":{},"headers":[],"relativePath":"projects/LitePan/4-user-features/4.2-file-sharing.md","filePath":"projects/LitePan/4-user-features/4.2-file-sharing.md","lastUpdated":1749448992000}'),o={name:"projects/LitePan/4-user-features/4.2-file-sharing.md"};function p(c,E,k,u,D,b){const A=n("Mermaid");return e(),d("div",null,[E[6]||(E[6]=s('<h1 id="文件共享" tabindex="-1">文件共享 <a class="header-anchor" href="#文件共享" aria-label="Permalink to &quot;文件共享&quot;">​</a></h1><blockquote><p><strong>相关源文件</strong></p><ul><li><a href="https://github.com/xueldx/%E4%BC%98%E4%BA%AB%E4%BA%91%E7%9B%98-front/blob/3ffecfa5/src/assets/share_bg.png" target="_blank" rel="noreferrer">src/assets/share_bg.png</a></li><li><a href="https://github.com/xueldx/%E4%BC%98%E4%BA%AB%E4%BA%91%E7%9B%98-front/blob/3ffecfa5/src/views/share/Share.vue" target="_blank" rel="noreferrer">src/views/share/Share.vue</a></li><li><a href="https://github.com/xueldx/%E4%BC%98%E4%BA%AB%E4%BA%91%E7%9B%98-front/blob/3ffecfa5/src/views/webshare/Share.vue" target="_blank" rel="noreferrer">src/views/webshare/Share.vue</a></li><li><a href="https://github.com/xueldx/%E4%BC%98%E4%BA%AB%E4%BA%91%E7%9B%98-front/blob/3ffecfa5/src/views/webshare/ShareCheck.vue" target="_blank" rel="noreferrer">src/views/webshare/ShareCheck.vue</a></li></ul></blockquote><p>文件共享系统允许用户为其文件和文件夹创建公共链接，外部用户可通过可共享的 URL 访问这些文件和文件夹，还可选择设置提取码以增强安全性。本文档涵盖了从创建到访问的完整共享工作流程，包括共享管理、公共查看界面和安全机制。</p><h2 id="系统架构" tabindex="-1">系统架构 <a class="header-anchor" href="#系统架构" aria-label="Permalink to &quot;系统架构&quot;">​</a></h2><p>文件共享系统由三个主要组件组成：经过身份验证的用户的共享管理、外部用户的公共共享访问，以及协调共享操作的后端 API。</p>',5)),(e(),i(B,null,{default:a(()=>[t(A,{id:"mermaid-39",class:"mermaid",graph:"flowchart%20TD%0A%0AA%5B%22Share.vue%22%5D%0AB%5B%22%E5%85%B1%E4%BA%AB%E7%AE%A1%E7%90%86%E7%95%8C%E9%9D%A2%22%5D%0AC%5B%22loadShareList%20API%22%5D%0AD%5B%22cancelShare%20API%22%5D%0AE%5B%22%E5%A4%8D%E5%88%B6%E5%85%B1%E4%BA%AB%E9%93%BE%E6%8E%A5%22%5D%0AF%5B%22ShareCheck.vue%22%5D%0AG%5B%22%E9%AA%8C%E8%AF%81%E7%A0%81%E9%AA%8C%E8%AF%81%22%5D%0AH%5B%22webshare%2FShare.vue%22%5D%0AI%5B%22%E5%85%AC%E5%85%B1%E6%96%87%E4%BB%B6%E6%B5%8F%E8%A7%88%E5%99%A8%22%5D%0AJ%5B%22checkShareCode%20API%22%5D%0AK%5B%22loadFileList%20API%22%5D%0AL%5B%22%E4%B8%8B%E8%BD%BDAPI%22%5D%0AM%5B%22saveShare%20API%22%5D%0AN%5B%22%2Fshare%2F*%22%5D%0AO%5B%22%E5%85%B1%E4%BA%AB%E7%AE%A1%E7%90%86%22%5D%0AP%5B%22%2FshowShare%2F*%22%5D%0AQ%5B%22%E5%85%AC%E5%85%B1%E8%AE%BF%E9%97%AE%22%5D%0A%0A%20%20%20%20A%20--%3E%20N%0A%20%20%20%20F%20--%3E%20P%0A%20%20%20%20H%20--%3E%20P%0Asubgraph%20Backend_APIs%20%5B%22%E5%90%8E%E7%AB%AFAPI%22%5D%0A%20%20%20%20N%0A%20%20%20%20O%0A%20%20%20%20P%0A%20%20%20%20Q%0A%20%20%20%20N%20--%3E%20O%0A%20%20%20%20P%20--%3E%20Q%0Aend%0A%0Asubgraph%20Public_Share_Access%20%5B%22%E5%85%AC%E5%85%B1%E5%85%B1%E4%BA%AB%E8%AE%BF%E9%97%AE%22%5D%0A%20%20%20%20F%0A%20%20%20%20G%0A%20%20%20%20H%0A%20%20%20%20I%0A%20%20%20%20J%0A%20%20%20%20K%0A%20%20%20%20L%0A%20%20%20%20M%0A%20%20%20%20F%20--%3E%20G%0A%20%20%20%20H%20--%3E%20I%0A%20%20%20%20G%20--%3E%20J%0A%20%20%20%20I%20--%3E%20K%0A%20%20%20%20I%20--%3E%20L%0A%20%20%20%20I%20--%3E%20M%0A%20%20%20%20G%20--%3E%20H%0Aend%0A%0Asubgraph%20Authenticated_User_Context%20%5B%22%E5%B7%B2%E8%AE%A4%E8%AF%81%E7%94%A8%E6%88%B7%E4%B8%8A%E4%B8%8B%E6%96%87%22%5D%0A%20%20%20%20A%0A%20%20%20%20B%0A%20%20%20%20C%0A%20%20%20%20D%0A%20%20%20%20E%0A%20%20%20%20A%20--%3E%20B%0A%20%20%20%20B%20--%3E%20C%0A%20%20%20%20B%20--%3E%20D%0A%20%20%20%20B%20--%3E%20E%0Aend%0A"})]),fallback:a(()=>E[0]||(E[0]=[r(" Loading... ")])),_:1})),E[7]||(E[7]=l("p",null,[l("strong",null,"共享管理流程图")],-1)),(e(),i(B,null,{default:a(()=>[t(A,{id:"mermaid-43",class:"mermaid",graph:"sequenceDiagram%0A%20%20participant%20%E5%B7%B2%E8%AE%A4%E8%AF%81%E7%94%A8%E6%88%B7%0A%20%20participant%20Share.vue%0A%20%20participant%20%E5%85%B1%E4%BA%ABAPI%0A%20%20participant%20%E5%85%AC%E5%85%B1%E7%94%A8%E6%88%B7%0A%20%20participant%20ShareCheck.vue%0A%20%20participant%20webshare%2FShare.vue%0A%0A%20%20%E5%B7%B2%E8%AE%A4%E8%AF%81%E7%94%A8%E6%88%B7-%3E%3EShare.vue%3A%20%E6%9F%A5%E7%9C%8B%E5%85%B1%E4%BA%AB%E6%96%87%E4%BB%B6%0A%20%20Share.vue-%3E%3E%E5%85%B1%E4%BA%ABAPI%3A%20loadShareList%0A%20%20%E5%85%B1%E4%BA%ABAPI--%3E%3EShare.vue%3A%20%E5%B8%A6%E6%9C%89%E5%85%83%E6%95%B0%E6%8D%AE%E7%9A%84%E5%85%B1%E4%BA%AB%E5%88%97%E8%A1%A8%0A%20%20%E5%B7%B2%E8%AE%A4%E8%AF%81%E7%94%A8%E6%88%B7-%3E%3EShare.vue%3A%20%E5%A4%8D%E5%88%B6%E5%85%B1%E4%BA%AB%E9%93%BE%E6%8E%A5%0A%20%20Share.vue-%3E%3EShare.vue%3A%20%E7%94%9F%E6%88%90%E5%8C%85%E5%90%ABshareId%20%2B%20%E9%AA%8C%E8%AF%81%E7%A0%81%E7%9A%84%E9%93%BE%E6%8E%A5%0A%20%20%E5%85%AC%E5%85%B1%E7%94%A8%E6%88%B7-%3E%3EShareCheck.vue%3A%20%E8%AE%BF%E9%97%AE%E5%85%B1%E4%BA%ABURL%0A%20%20ShareCheck.vue-%3E%3E%E5%85%B1%E4%BA%ABAPI%3A%20getShareInfo%0A%20%20%E5%85%B1%E4%BA%ABAPI--%3E%3EShareCheck.vue%3A%20%E5%85%B1%E4%BA%AB%E5%85%83%E6%95%B0%E6%8D%AE%0A%20%20%E5%85%AC%E5%85%B1%E7%94%A8%E6%88%B7-%3E%3EShareCheck.vue%3A%20%E8%BE%93%E5%85%A5%E6%8F%90%E5%8F%96%E7%A0%81%0A%20%20ShareCheck.vue-%3E%3E%E5%85%B1%E4%BA%ABAPI%3A%20checkShareCode%0A%20%20%E5%85%B1%E4%BA%ABAPI--%3E%3EShareCheck.vue%3A%20%E9%AA%8C%E8%AF%81%E7%BB%93%E6%9E%9C%0A%20%20ShareCheck.vue-%3E%3Ewebshare%2FShare.vue%3A%20%E9%AA%8C%E8%AF%81%E6%88%90%E5%8A%9F%E5%90%8E%E9%87%8D%E5%AE%9A%E5%90%91%0A%20%20webshare%2FShare.vue-%3E%3E%E5%85%B1%E4%BA%ABAPI%3A%20loadFileList%0A%20%20%E5%85%B1%E4%BA%ABAPI--%3E%3Ewebshare%2FShare.vue%3A%20%E5%85%B1%E4%BA%AB%E6%96%87%E4%BB%B6%0A%20%20%E5%85%AC%E5%85%B1%E7%94%A8%E6%88%B7-%3E%3Ewebshare%2FShare.vue%3A%20%E4%B8%8B%E8%BD%BD%E6%88%96%E4%BF%9D%E5%AD%98%E6%96%87%E4%BB%B6%0A"})]),fallback:a(()=>E[1]||(E[1]=[r(" Loading... ")])),_:1})),E[8]||(E[8]=s('<h2 id="共享管理界面" tabindex="-1">共享管理界面 <a class="header-anchor" href="#共享管理界面" aria-label="Permalink to &quot;共享管理界面&quot;">​</a></h2><p>位于 <code>/share</code> 的共享管理界面为已认证用户提供了其活跃共享的全面视图，使用户能够监控使用情况并管理共享的生命周期。</p><h3 id="核心组件" tabindex="-1">核心组件 <a class="header-anchor" href="#核心组件" aria-label="Permalink to &quot;核心组件&quot;">​</a></h3><p>已认证用户上下文中的 <code>Share.vue</code> 组件以表格形式显示共享文件，具有以下关键功能：</p><table tabindex="0"><thead><tr><th>列名</th><th>用途</th></tr></thead><tbody><tr><td><code>fileName</code></td><td>带有操作控件的文件/文件夹名称</td></tr><tr><td><code>shareTime</code></td><td>共享创建时间</td></tr><tr><td><code>expireTime</code></td><td>共享过期时间（永久有效则显示“永久有效”）</td></tr><tr><td><code>showCount</code></td><td>共享被访问的次数</td></tr></tbody></table><h3 id="共享操作" tabindex="-1">共享操作 <a class="header-anchor" href="#共享操作" aria-label="Permalink to &quot;共享操作&quot;">​</a></h3><p>该界面提供了两个主要的共享管理操作：</p><p><strong>复制共享链接</strong>：使用 <code>toClipboard</code> 函数生成带有提取码的格式化共享 URL：</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>链接: {shareUrl}{shareId} 提取码: {code}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><strong>取消共享</strong>：支持通过 <code>cancelShare</code> API 端点进行单个或批量取消共享操作。</p>',10)),(e(),i(B,null,{default:a(()=>[t(A,{id:"mermaid-115",class:"mermaid",graph:"flowchart%20TD%0A%0AA%5B%22%E8%A1%A8%E6%A0%BC%E8%A1%8C%22%5D%0AB%5B%22%E9%BC%A0%E6%A0%87%E6%82%AC%E5%81%9C%22%5D%0AC%5B%22%E6%98%BE%E7%A4%BA%E6%93%8D%E4%BD%9C%22%5D%0AD%5B%22%E5%A4%8D%E5%88%B6%E9%93%BE%E6%8E%A5%22%5D%0AE%5B%22%E5%8F%96%E6%B6%88%E5%85%B1%E4%BA%AB%22%5D%0AF%5B%22%E5%A4%8D%E9%80%89%E6%A1%86%E9%80%89%E6%8B%A9%22%5D%0AG%5B%22%E6%89%B9%E9%87%8F%E6%93%8D%E4%BD%9C%22%5D%0AH%5B%22%E6%89%B9%E9%87%8F%E5%8F%96%E6%B6%88%22%5D%0AI%5B%22toClipboard%22%5D%0AJ%5B%22cancelShare%20API%22%5D%0A%0A%20%20%20%20A%20--%3E%20B%0A%20%20%20%20B%20--%3E%20C%0A%20%20%20%20C%20--%3E%20D%0A%20%20%20%20C%20--%3E%20E%0A%20%20%20%20F%20--%3E%20G%0A%20%20%20%20G%20--%3E%20H%0A%20%20%20%20D%20--%3E%20I%0A%20%20%20%20E%20--%3E%20J%0A%20%20%20%20H%20--%3E%20J%0A"})]),fallback:a(()=>E[2]||(E[2]=[r(" Loading... ")])),_:1})),E[9]||(E[9]=s('<h2 id="公共共享访问" tabindex="-1">公共共享访问 <a class="header-anchor" href="#公共共享访问" aria-label="Permalink to &quot;公共共享访问&quot;">​</a></h2><p>公共共享访问系统由两个阶段组成：验证码验证和文件浏览，旨在为外部用户提供安全的共享内容访问途径。</p><h3 id="共享验证码验证" tabindex="-1">共享验证码验证 <a class="header-anchor" href="#共享验证码验证" aria-label="Permalink to &quot;共享验证码验证&quot;">​</a></h3><p><code>ShareCheck.vue</code> 组件处理共享文件的初始访问点。当用户访问共享 URL (<code>/shareCheck/{shareId}</code>) 时，会看到一个验证码验证界面。</p><p><strong>关键特性：</strong></p><ul><li>显示共享元数据，包括共享者信息和文件名</li><li>输入 5 位提取码并进行验证</li><li>验证成功后自动重定向到主共享界面</li></ul>',6)),(e(),i(B,null,{default:a(()=>[t(A,{id:"mermaid-148",class:"mermaid",graph:"flowchart%20TD%0A%0AA%5B%22%E5%85%B1%E4%BA%ABURL%E8%AE%BF%E9%97%AE%22%5D%0AB%5B%22ShareCheck.vue%22%5D%0AC%5B%22getShareInfo%20API%22%5D%0AD%5B%22%E6%98%BE%E7%A4%BA%E5%85%B1%E4%BA%AB%E5%85%83%E6%95%B0%E6%8D%AE%22%5D%0AE%5B%22%E9%AA%8C%E8%AF%81%E7%A0%81%E8%BE%93%E5%85%A5%E8%A1%A8%E5%8D%95%22%5D%0AF%5B%22checkShareCode%20API%22%5D%0AG%5B%22%E9%AA%8C%E8%AF%81%E6%88%90%E5%8A%9F%EF%BC%9F%22%5D%0AH%5B%22%E9%87%8D%E5%AE%9A%E5%90%91%E5%88%B0%20%2Fshare%2F%7BshareId%7D%22%5D%0AI%5B%22%E6%98%BE%E7%A4%BA%E9%94%99%E8%AF%AF%E6%B6%88%E6%81%AF%22%5D%0A%0A%20%20%20%20A%20--%3E%20B%0A%20%20%20%20B%20--%3E%20C%0A%20%20%20%20C%20--%3E%20D%0A%20%20%20%20D%20--%3E%20E%0A%20%20%20%20E%20--%3E%20F%0A%20%20%20%20F%20--%3E%20G%0A%20%20%20%20G%20--%3E%7C%E6%98%AF%7C%20H%0A%20%20%20%20G%20--%3E%7C%E5%90%A6%7C%20I%0A"})]),fallback:a(()=>E[3]||(E[3]=[r(" Loading... ")])),_:1})),E[10]||(E[10]=s(`<p>验证规则要求提取码必须为 5 位：</p><div class="language-yaml vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">rules</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  {</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    code</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        { </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">required</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">message</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;请输入提取码&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        { </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">min</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">message</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;提取码为5位&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        { </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">max</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">message</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;提取码为5位&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      ],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="公共文件浏览器" tabindex="-1">公共文件浏览器 <a class="header-anchor" href="#公共文件浏览器" aria-label="Permalink to &quot;公共文件浏览器&quot;">​</a></h3><p>公共共享界面 (<code>webshare/Share.vue</code>) 为外部用户提供了文件浏览体验，其功能针对未认证用户进行了优化。</p><p><strong>核心界面元素：</strong></p><ul><li>带有品牌标识和导航的头部</li><li>显示共享者详细信息的共享信息面板</li><li>具备下载和保存功能的文件列表</li><li>用于文件夹导航的导航组件</li></ul>`,6)),(e(),i(B,null,{default:a(()=>[t(A,{id:"mermaid-184",class:"mermaid",graph:"flowchart%20TD%0A%0AA%5B%22%E5%B8%A6%E6%9C%89logo%E7%9A%84%E5%A4%B4%E9%83%A8%22%5D%0AB%5B%22%E5%85%B1%E4%BA%AB%E4%BF%A1%E6%81%AF%E9%9D%A2%E6%9D%BF%22%5D%0AC%5B%22%E7%94%A8%E6%88%B7%E5%A4%B4%E5%83%8F%E5%92%8C%E5%85%83%E6%95%B0%E6%8D%AE%22%5D%0AD%5B%22%E6%93%8D%E4%BD%9C%E6%8C%89%E9%92%AE%22%5D%0AE%5B%22%E5%8F%96%E6%B6%88%E5%85%B1%E4%BA%AB%EF%BC%88%E6%89%80%E6%9C%89%E8%80%85%EF%BC%89%22%5D%0AF%5B%22%E4%BF%9D%E5%AD%98%E5%88%B0%E6%88%91%E7%9A%84%E7%BD%91%E7%9B%98%EF%BC%88%E8%AE%BF%E5%AE%A2%EF%BC%89%22%5D%0AG%5B%22%E5%AF%BC%E8%88%AA%E7%BB%84%E4%BB%B6%22%5D%0AH%5B%22%E6%96%87%E4%BB%B6%E5%A4%B9%E9%9D%A2%E5%8C%85%E5%B1%91%22%5D%0AI%5B%22%E6%96%87%E4%BB%B6%E5%88%97%E8%A1%A8%E8%A1%A8%E6%A0%BC%22%5D%0AJ%5B%22%E6%96%87%E4%BB%B6%E5%9B%BE%E6%A0%87%E5%92%8C%E5%90%8D%E7%A7%B0%22%5D%0AK%5B%22%E4%B8%8B%E8%BD%BD%E9%93%BE%E6%8E%A5%22%5D%0AL%5B%22%E4%BF%9D%E5%AD%98%E9%80%89%E9%A1%B9%22%5D%0AM%5B%22%E8%BA%AB%E4%BB%BD%E9%AA%8C%E8%AF%81%E6%A3%80%E6%9F%A5%22%5D%0AN%5B%22%E6%98%AF%E5%90%A6%E4%B8%BA%E6%89%80%E6%9C%89%E8%80%85%EF%BC%9F%22%5D%0A%0A%20%20%20%20M%20--%3E%20N%0A%0A%20%20%20%20N%20--%3E%20E%0A%20%20%20%20N%20--%3E%20F%0Asubgraph%20Public_Share_Interface_Components%20%5B%22%E5%85%AC%E5%85%B1%E5%85%B1%E4%BA%AB%E7%95%8C%E9%9D%A2%E7%BB%84%E4%BB%B6%22%5D%0A%20%20%20%20A%0A%20%20%20%20B%0A%20%20%20%20C%0A%20%20%20%20D%0A%20%20%20%20E%0A%20%20%20%20F%0A%20%20%20%20G%0A%20%20%20%20H%0A%20%20%20%20I%0A%20%20%20%20J%0A%20%20%20%20K%0A%20%20%20%20L%0A%20%20%20%20A%20--%3E%20B%0A%20%20%20%20B%20--%3E%20C%0A%20%20%20%20B%20--%3E%20D%0A%20%20%20%20D%20--%3E%7C%E5%90%A6%7C%20E%0A%20%20%20%20D%20--%3E%20F%0A%20%20%20%20G%20--%3E%20H%0A%20%20%20%20I%20--%3E%20J%0A%20%20%20%20I%20--%3E%20K%0A%20%20%20%20I%20--%3E%20L%0Aend%0A"})]),fallback:a(()=>E[4]||(E[4]=[r(" Loading... ")])),_:1})),E[11]||(E[11]=s('<p><strong>文件操作：</strong></p><ul><li><strong>下载</strong>：支持单个文件的直接下载（不支持文件夹下载）</li><li><strong>保存到我的网盘</strong>：允许已认证用户将共享文件保存到个人存储中</li><li><strong>预览</strong>：支持对部分文件类型进行文件预览</li><li><strong>导航</strong>：支持在共享目录结构中浏览文件夹</li></ul><h2 id="api-集成" tabindex="-1">API 集成 <a class="header-anchor" href="#api-集成" aria-label="Permalink to &quot;API 集成&quot;">​</a></h2><p>文件共享系统与多个后端 API 端点集成，这些端点主要分为两类：已认证用户的共享管理和公共共享访问。</p><h3 id="共享管理-api" tabindex="-1">共享管理 API <a class="header-anchor" href="#共享管理-api" aria-label="Permalink to &quot;共享管理 API&quot;">​</a></h3><table tabindex="0"><thead><tr><th>端点</th><th>用途</th></tr></thead><tbody><tr><td><code>/share/loadShareList</code></td><td>获取用户的活跃共享</td></tr><tr><td><code>/share/cancelShare</code></td><td>取消一个或多个共享</td></tr></tbody></table><h3 id="公共共享-api" tabindex="-1">公共共享 API <a class="header-anchor" href="#公共共享-api" aria-label="Permalink to &quot;公共共享 API&quot;">​</a></h3><table tabindex="0"><thead><tr><th>端点</th><th>用途</th></tr></thead><tbody><tr><td><code>/showShare/getShareInfo</code></td><td>获取用于验证的共享元数据</td></tr><tr><td><code>/showShare/checkShareCode</code></td><td>验证提取码</td></tr><tr><td><code>/showShare/getShareLoginInfo</code></td><td>获取用于已认证访问的共享信息</td></tr><tr><td><code>/showShare/loadFileList</code></td><td>列出共享目录中的文件</td></tr><tr><td><code>/showShare/createDownloadUrl</code></td><td>生成下载 URL</td></tr><tr><td><code>/showShare/saveShare</code></td><td>将共享文件保存到用户的存储中</td></tr></tbody></table>',8)),(e(),i(B,null,{default:a(()=>[t(A,{id:"mermaid-314",class:"mermaid",graph:"flowchart%20TD%0A%0AA%5B%22HTTP%E5%AE%A2%E6%88%B7%E7%AB%AF%22%5D%0AB%5B%22Request.js%22%5D%0AC%5B%22%E8%BA%AB%E4%BB%BD%E9%AA%8C%E8%AF%81%E5%A4%B4%22%5D%0AD%5B%22%E5%8A%A0%E8%BD%BD%E7%AE%A1%E7%90%86%22%5D%0AE%5B%22%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86%22%5D%0AF%5B%22%2Fshare%2FloadShareList%22%5D%0AG%5B%22%2Fshare%2FcancelShare%22%5D%0AH%5B%22%2FshowShare%2FgetShareInfo%22%5D%0AI%5B%22%2FshowShare%2FcheckShareCode%22%5D%0AJ%5B%22%2FshowShare%2FloadFileList%22%5D%0AK%5B%22%2FshowShare%2FcreateDownloadUrl%22%5D%0AL%5B%22%2FshowShare%2FsaveShare%22%5D%0A%0A%20%20%20%20B%20--%3E%20F%0A%20%20%20%20B%20--%3E%20G%0A%20%20%20%20B%20--%3E%20H%0A%20%20%20%20B%20--%3E%20I%0A%20%20%20%20B%20--%3E%20J%0A%20%20%20%20B%20--%3E%20K%0A%20%20%20%20B%20--%3E%20L%0Asubgraph%20Public_Access_Endpoints%20%5B%22%E5%85%AC%E5%85%B1%E8%AE%BF%E9%97%AE%E7%AB%AF%E7%82%B9%22%5D%0A%20%20%20%20H%0A%20%20%20%20I%0A%20%20%20%20J%0A%20%20%20%20K%0A%20%20%20%20L%0Aend%0A%0Asubgraph%20Share_Management_Endpoints%20%5B%22%E5%85%B1%E4%BA%AB%E7%AE%A1%E7%90%86%E7%AB%AF%E7%82%B9%22%5D%0A%20%20%20%20F%0A%20%20%20%20G%0Aend%0A%0Asubgraph%20API_Request_Flow%20%5B%22API%E8%AF%B7%E6%B1%82%E6%B5%81%E7%A8%8B%22%5D%0A%20%20%20%20A%0A%20%20%20%20B%0A%20%20%20%20C%0A%20%20%20%20D%0A%20%20%20%20E%0A%20%20%20%20A%20--%3E%20B%0A%20%20%20%20B%20--%3E%20C%0A%20%20%20%20B%20--%3E%20D%0A%20%20%20%20B%20--%3E%20E%0Aend%0A"})]),fallback:a(()=>E[5]||(E[5]=[r(" Loading... ")])),_:1})),E[12]||(E[12]=s('<h2 id="数据流和状态管理" tabindex="-1">数据流和状态管理 <a class="header-anchor" href="#数据流和状态管理" aria-label="Permalink to &quot;数据流和状态管理&quot;">​</a></h2><p>共享系统为已认证用户和公共访客维护不同的状态上下文，并仔细处理身份验证要求和数据持久化。</p><h3 id="共享管理状态" tabindex="-1">共享管理状态 <a class="header-anchor" href="#共享管理状态" aria-label="Permalink to &quot;共享管理状态&quot;">​</a></h3><p>已认证的共享管理界面维护以下状态：</p><ul><li><code>tableData</code>：用户共享的分页列表，包含元数据</li><li><code>selectIdList</code>：用于批量操作的所选共享</li><li><code>shareUrl</code>：用于生成共享链接的基础 URL</li></ul><h3 id="公共访问状态" tabindex="-1">公共访问状态 <a class="header-anchor" href="#公共访问状态" aria-label="Permalink to &quot;公共访问状态&quot;">​</a></h3><p>公共共享界面管理以下状态：</p><ul><li><code>shareInfo</code>：共享元数据和所有者信息</li><li><code>currentFolder</code>：共享目录中的当前导航位置</li><li><code>selectFileIdList</code>：用于保存操作的所选文件</li><li><code>save2MyPanFileIdArray</code>：用于保存操作的临时存储</li></ul><p>系统通过 <code>proxy.VueCookies.get(&quot;userInfo&quot;)</code> 检查来处理身份验证上下文切换，当未认证用户尝试进行保存操作时，会将其重定向到登录页面。</p>',9))])}const g=h(o,[["render",p]]);export{F as __pageData,g as default};
