import{_ as r,C as n,c as s,o,a8 as i,b as d,j as t,w as B,a as e,G as a,a9 as l}from"./chunks/framework.DW4T_yAZ.js";const S=JSON.parse('{"title":"问卷编辑器的实现","description":"","frontmatter":{},"headers":[],"relativePath":"projects/QuickSurvey-fe/Question-Editor/Question-Editor.md","filePath":"projects/QuickSurvey-fe/Question-Editor/Question-Editor.md","lastUpdated":1749448992000}'),c={name:"projects/QuickSurvey-fe/Question-Editor/Question-Editor.md"},D={class:"info custom-block"};function u(C,E,m,p,b,h){const A=n("Mermaid");return o(),s("div",null,[E[18]||(E[18]=i('<h1 id="问卷编辑器的实现" tabindex="-1">问卷编辑器的实现 <a class="header-anchor" href="#问卷编辑器的实现" aria-label="Permalink to &quot;问卷编辑器的实现&quot;">​</a></h1><h2 id="问卷编辑器简介" tabindex="-1"><code>问卷编辑器简介</code> <a class="header-anchor" href="#问卷编辑器简介" aria-label="Permalink to &quot;`问卷编辑器简介`&quot;">​</a></h2><p><code>问卷编辑器</code>作为问卷小筑应用的<code>核心</code>模块，承担着问卷<code>创建与编辑</code>的核心功能，为用户提供直观、便捷的交互界面。本文档将深入解析编辑器的界面布局、组件构成及具体功能。</p><h2 id="编辑器结构" tabindex="-1"><code>编辑器结构</code> <a class="header-anchor" href="#编辑器结构" aria-label="Permalink to &quot;`编辑器结构`&quot;">​</a></h2><div class="tip custom-block"><p class="custom-block-title">问卷编辑器分为四个主要部分：</p><ol><li><strong>编辑头部</strong>：包含标题、保存/发布按钮和编辑工具栏</li><li><strong>左侧面板</strong>：包含用于添加新元件的元件库和用于管理元件顺序的图层面板</li><li><strong>主画布</strong>：显示正在编辑的调查问卷以及所有组件实例</li><li><strong>右面板</strong>：显示所选组件和页面设置的属性编辑器</li></ol></div>',5)),(o(),d(l,null,{default:B(()=>[a(A,{id:"mermaid-36",class:"mermaid",graph:"graph%20TD%3B%0A%20%20%20%20%E9%97%AE%E5%8D%B7%E7%BC%96%E8%BE%91%E5%99%A8%20--%3E%20%E7%BC%96%E8%BE%91%E9%A1%B5%E9%9D%A2%E5%AE%B9%E5%99%A8%3B%0A%20%20%20%20%E7%BC%96%E8%BE%91%E9%A1%B5%E9%9D%A2%E5%AE%B9%E5%99%A8%20--%3E%20%E7%BC%96%E8%BE%91%E5%99%A8%E5%86%85%E5%AE%B9%3B%0A%20%20%20%20%E7%BC%96%E8%BE%91%E9%A1%B5%E9%9D%A2%E5%AE%B9%E5%99%A8%20--%3E%20%E7%BC%96%E8%BE%91%E5%A4%B4%E9%83%A8%3B%0A%20%20%20%20%E7%BC%96%E8%BE%91%E5%99%A8%E5%86%85%E5%AE%B9%20--%3E%20%E5%B7%A6%E4%BE%A7%E9%9D%A2%E6%9D%BF%3B%0A%20%20%20%20%E7%BC%96%E8%BE%91%E5%99%A8%E5%86%85%E5%AE%B9%20--%3E%20%E7%BC%96%E8%BE%91%E7%94%BB%E5%B8%83%3B%0A%20%20%20%20%E7%BC%96%E8%BE%91%E5%99%A8%E5%86%85%E5%AE%B9%20--%3E%20%E5%8F%B3%E4%BE%A7%E9%9D%A2%E6%9D%BF%3B%0A%20%20%20%20%E5%B7%A6%E4%BE%A7%E9%9D%A2%E6%9D%BF%20--%3E%20%E7%BB%84%E4%BB%B6%E5%BA%93%3B%0A%20%20%20%20%E5%B7%A6%E4%BE%A7%E9%9D%A2%E6%9D%BF%20--%3E%20%E5%9B%BE%E5%B1%82%E9%9D%A2%E6%9D%BF%3B%0A%20%20%20%20%E7%BC%96%E8%BE%91%E7%94%BB%E5%B8%83%20--%3E%20%E7%BB%84%E4%BB%B6%E5%AE%9E%E4%BE%8B%3B%0A%20%20%20%20%E7%BC%96%E8%BE%91%E7%94%BB%E5%B8%83%20--%3E%20%E6%8B%96%E6%94%BE%E7%95%8C%E9%9D%A2%3B%0A%20%20%20%20%E5%8F%B3%E4%BE%A7%E9%9D%A2%E6%9D%BF%20--%3E%20%E7%BB%84%E4%BB%B6%E5%B1%9E%E6%80%A7%3B%0A%20%20%20%20%E7%BC%96%E8%BE%91%E5%A4%B4%E9%83%A8%20--%3E%20%E6%A0%87%E9%A2%98%E7%BC%96%E8%BE%91%E5%99%A8%3B%0A%20%20%20%20%E7%BC%96%E8%BE%91%E5%A4%B4%E9%83%A8%20--%3E%20%E7%BC%96%E8%BE%91%E5%B7%A5%E5%85%B7%E6%A0%8F%3B%0A%20%20%20%20%E7%BC%96%E8%BE%91%E5%A4%B4%E9%83%A8%20--%3E%20%E4%BF%9D%E5%AD%98%E6%8C%89%E9%92%AE%3B%0A%20%20%20%20%E7%BC%96%E8%BE%91%E5%A4%B4%E9%83%A8%20--%3E%20%E5%8F%91%E5%B8%83%E6%8C%89%E9%92%AE%3B%0A%20%20%20%20%E5%8F%B3%E4%BE%A7%E9%9D%A2%E6%9D%BF%20--%3E%20%E9%A1%B5%E9%9D%A2%E8%AE%BE%E7%BD%AE%3B%0A"})]),fallback:B(()=>E[0]||(E[0]=[e(" Loading... ")])),_:1})),E[19]||(E[19]=t("h2",{id:"问卷数据加载",tabindex:"-1"},[t("code",null,"问卷数据加载"),e(),t("a",{class:"header-anchor",href:"#问卷数据加载","aria-label":'Permalink to "`问卷数据加载`"'},"​")],-1)),E[20]||(E[20]=t("p",null,[e("当编辑器"),t("code",null,"初始化"),e("时，它会从后端 API 加载"),t("code",null,"指定问卷 ID"),e(" 的问卷数据。")],-1)),(o(),d(l,null,{default:B(()=>[a(A,{id:"mermaid-43",class:"mermaid",graph:"sequenceDiagram%0A%20%20%20%20participant%20%22%E7%94%A8%E6%88%B7%22%0A%20%20%20%20participant%20%22%E7%BC%96%E8%BE%91%E7%BB%84%E4%BB%B6%22%0A%20%20%20%20participant%20%22useLoadQuestionData%22%0A%20%20%20%20participant%20%22Redux%20Store%22%0A%20%20%20%20participant%20%22%E9%97%AE%E5%8D%B7%E6%9C%8D%E5%8A%A1API%22%0A%20%20%20%20%22%E7%94%A8%E6%88%B7%22%20-%3E%3E%20%22%E7%BC%96%E8%BE%91%E7%BB%84%E4%BB%B6%22%3A%20%E4%BD%BF%E7%94%A8%E9%97%AE%E5%8D%B7ID%E6%89%93%E5%BC%80%E7%BC%96%E8%BE%91%E5%99%A8%0A%20%20%20%20%22%E7%BC%96%E8%BE%91%E7%BB%84%E4%BB%B6%22%20-%3E%3E%20%22useLoadQuestionData%22%3A%20%E8%B0%83%E7%94%A8useLoadQuestionData%0A%20%20%20%20%22useLoadQuestionData%22%20-%3E%3E%20%22%E9%97%AE%E5%8D%B7%E6%9C%8D%E5%8A%A1API%22%3A%20getQuestionService(id)%0A%20%20%20%20%22%E9%97%AE%E5%8D%B7%E6%9C%8D%E5%8A%A1API%22%20--%3E%3E%20%22useLoadQuestionData%22%3A%20%E8%BF%94%E5%9B%9E%E9%97%AE%E5%8D%B7%E6%95%B0%E6%8D%AE%0A%20%20%20%20%22useLoadQuestionData%22%20-%3E%3E%20%22Redux%20Store%22%3A%20resetComponents%E6%93%8D%E4%BD%9C%0A%20%20%20%20%22useLoadQuestionData%22%20-%3E%3E%20%22Redux%20Store%22%3A%20resetPageInfo%E6%93%8D%E4%BD%9C%0A%20%20%20%20%22Redux%20Store%22%20--%3E%3E%20%22%E7%BC%96%E8%BE%91%E7%BB%84%E4%BB%B6%22%3A%20%E6%9B%B4%E6%96%B0%E7%8A%B6%E6%80%81%0A%20%20%20%20%22%E7%BC%96%E8%BE%91%E7%BB%84%E4%BB%B6%22%20--%3E%3E%22%E7%94%A8%E6%88%B7%22%20%20%3A%20%E4%BD%BF%E7%94%A8%E5%8A%A0%E8%BD%BD%E7%9A%84%E6%95%B0%E6%8D%AE%E6%B8%B2%E6%9F%93%E7%BC%96%E8%BE%91%E5%99%A8%0A"})]),fallback:B(()=>E[1]||(E[1]=[e(" Loading... ")])),_:1})),E[21]||(E[21]=i('<div class="info custom-block"><p class="custom-block-title"><code>解释</code></p><ul><li><code>useLoadQuestionData</code> hook 管理问卷数据的加载</li><li>根据 URL 参数中的 ID 获取问卷数据</li><li>成功加载后，数据被分发到 Redux store</li><li>组件被加载到 <code>componentsReducer</code></li><li>页面元数据被加载到 <code>pageInfoReducer</code></li><li>默认组件选择设置为第一个组件</li></ul></div><h2 id="编辑画布" tabindex="-1"><code>编辑画布</code> <a class="header-anchor" href="#编辑画布" aria-label="Permalink to &quot;`编辑画布`&quot;">​</a></h2><p>编辑画布是问卷组件<code>显示</code>、<code>选择</code>和<code>排列</code>的中心工作区。</p><h3 id="功能" tabindex="-1"><code>功能</code> <a class="header-anchor" href="#功能" aria-label="Permalink to &quot;`功能`&quot;">​</a></h3><ul><li><code>显示</code>问卷中所有<code>可见</code>的组件</li><li>允许通过<code>点击</code>选择组件</li><li>支持组件的<code>拖放重新排序</code></li><li>用边框<code>高亮</code>显示选中的组件</li><li>显示组件的<code>锁定或隐藏</code>状态</li></ul>',5)),(o(),d(l,null,{default:B(()=>[a(A,{id:"mermaid-114",class:"mermaid",graph:"flowchart%20TD%0A%20%20%20%20%E7%94%A8%E6%88%B7%E4%BA%A4%E4%BA%92%20--%3E%20%E7%82%B9%E5%87%BB%E7%BB%84%E4%BB%B6%0A%20%20%20%20%E7%82%B9%E5%87%BB%E7%BB%84%E4%BB%B6%20--%3E%20dispatch_changeSelectedId%0A%20%20%20%20%E7%BC%96%E8%BE%91%E7%94%BB%E5%B8%83%E7%BB%84%E4%BB%B6%20--%3E%20%E6%B8%B2%E6%9F%93%E7%BB%84%E4%BB%B6%E5%88%97%E8%A1%A8%0A%20%20%20%20%E7%BC%96%E8%BE%91%E7%94%BB%E5%B8%83%E7%BB%84%E4%BB%B6%20--%3E%20%E8%BF%87%E6%BB%A4%E5%8F%AF%E8%A7%81%E7%BB%84%E4%BB%B6%0A%20%20%20%20%E6%B8%B2%E6%9F%93%E7%BB%84%E4%BB%B6%E5%88%97%E8%A1%A8%20--%3E%20SortableContainer%0A%20%20%20%20SortableContainer%20--%3E%20SortableItems%0A%20%20%20SortableItems%20--%3E%20%E7%BB%84%E4%BB%B6%E5%8C%85%E8%A3%85%E5%99%A8%0A%20%20%20%20%E6%8B%96%E5%8A%A8%E7%BB%84%E4%BB%B6%20--%3E%20handleDragEnd%0A%20%20%20%20handleDragEnd%20--%3E%20dispatch_moveComponentList%0A%20%20%20%20Redux_Store%20--%3E%20componentList%0A%20%20%20%20Redux_Store%20--%3E%20selectedId%0A%20%20%20%20componentList%20--%3E%20%E8%BF%87%E6%BB%A4%E5%8F%AF%E8%A7%81%E7%BB%84%E4%BB%B6%0A%20%20%20%20selectedId%20--%3E%20%E7%BB%84%E4%BB%B6%E5%8C%85%E8%A3%85%E5%99%A8%0A%20%20%20%20%E7%BB%84%E4%BB%B6%E5%8C%85%E8%A3%85%E5%99%A8%20--%3E%20%E5%AE%9E%E9%99%85%E7%BB%84%E4%BB%B6%E5%AE%9E%E4%BE%8B%0A"})]),fallback:B(()=>E[2]||(E[2]=[e(" Loading... ")])),_:1})),E[22]||(E[22]=i('<h3 id="组件渲染" tabindex="-1"><code>组件渲染</code> <a class="header-anchor" href="#组件渲染" aria-label="Permalink to &quot;`组件渲染`&quot;">​</a></h3><div class="info custom-block"><p class="custom-block-title">画布根据组件的<code>类型</code>和<code>属性</code>动态渲染组件：</p><ol><li>从组件列表中<code>过滤</code>隐藏的组件</li><li>将每个组件<code>映射</code>到<code>可拖动</code>项</li><li>根据选择状态使用适当的包装类<code>渲染</code>每个组件</li><li>使用组件<code>配置</code>生成<code>实际</code>的组件实例</li></ol></div>',2)),(o(),d(l,null,{default:B(()=>[a(A,{id:"mermaid-142",class:"mermaid",graph:"%20%20%20%20flowchart%20TD%0A%20%20%20%20A%5B%E5%BC%80%E5%A7%8B%5D%20--%3E%20B%5B%E4%BB%8ERedux%E8%8E%B7%E5%8F%96componentList%5D%0A%20%20%20%20B%20--%3E%20C%5B%E8%BF%87%E6%BB%A4%E9%9A%90%E8%97%8F%E7%9A%84%E7%BB%84%E4%BB%B6%5D%0A%20%20%20%20C%20--%3E%20D%5B%E4%BD%BF%E7%94%A8SortableContainer%E7%9A%84ID%E6%98%A0%E5%B0%84%E7%BB%84%E4%BB%B6%5D%0A%20%20%20%20D%20--%3E%20E%5B%E6%B8%B2%E6%9F%93SortableContainer%5D%0A%20%20%20%20E%20--%3E%20F%5B%E5%AF%B9%E4%BA%8E%E6%AF%8F%E4%B8%AA%E7%BB%84%E4%BB%B6%5D%0A%20%20%20%20F%20--%3E%20G%5B%E6%A0%B9%E6%8D%AE%E7%8A%B6%E6%80%81%E7%A1%AE%E5%AE%9A%E7%BB%84%E4%BB%B6%E7%B1%BB%5D%0A%20%20%20%20G%20--%3E%20H%5B%E4%BD%BF%E7%94%A8%E7%BB%84%E4%BB%B6%E5%8C%85%E8%A3%85%E5%99%A8%E6%B8%B2%E6%9F%93SortableItem%5D%0A%20%20%20%20H%20--%3E%20I%5B%E4%BD%BF%E7%94%A8genComponent%E7%94%9F%E6%88%90%E7%BB%84%E4%BB%B6%5D%0A%20%20%20%20F%20--%3E%20J%7B%E5%A6%82%E6%9E%9C%E5%AD%98%E5%9C%A8%E6%9B%B4%E5%A4%9A%E7%B2%97%E4%BB%B6%EF%BC%8C%E5%88%99%E8%BF%94%E5%8F%B5%E5%88%B0%E4%B8%8B%E4%B8%80%E4%B8%AA%E7%BB%84%E4%BB%B6%7D%0A%20%20%20%20J%20--%3E%20F%0A%20%20%20%20J%20--%3E%7C%E6%97%A0%E9%9C%80%E6%9B%B4%E5%A4%9A%E7%BB%84%E4%BB%B6%7C%20K%5B%E7%BB%93%E6%9D%9F%5D%0A"})]),fallback:B(()=>E[3]||(E[3]=[e(" Loading... ")])),_:1})),E[23]||(E[23]=t("br",null,null,-1)),E[24]||(E[24]=t("blockquote",null,[t("p",null,[e("编辑器画布使用"),t("code",null,"genComponent"),e("函数根据存储在 Redux 中的类型和属性来渲染每个组件")])],-1)),(o(),d(l,null,{default:B(()=>[a(A,{id:"mermaid-149",class:"mermaid",graph:"flowchart%20LR%0A%20%20%20%20A%5B%E7%BB%84%E4%BB%B6%E4%BF%A1%E6%81%AF%5D%20--%3E%20B%5B%E6%95%B0%E6%8D%AE%E6%8F%90%E5%8F%96%E7%B1%BB%E5%9E%8B%E5%92%8Cprop%5D%0A%20%20%20%20B%20--%3E%20C%5B%E8%B0%83%E7%94%A8getComponentConfByType%5D%0A%20%20%20%20C%20--%3E%20D%5B%E4%BB%8Econf%E8%8E%B7%E5%8F%96Component%E7%B1%BB%5D%0A%20%20%20%20D%20--%3E%20E%5B%E5%91%88%E7%8E%B0%5D%0A"})]),fallback:B(()=>E[4]||(E[4]=[e(" Loading... ")])),_:1})),E[25]||(E[25]=i('<h2 id="拖拽排序实现" tabindex="-1"><code>拖拽排序实现</code> <a class="header-anchor" href="#拖拽排序实现" aria-label="Permalink to &quot;`拖拽排序实现`&quot;">​</a></h2><p>在问卷编辑器中，拖拽排序功能主要用于两个地方：</p><ol><li><code>编辑画布</code>中组件的排序</li><li><code>左侧图层面板</code>中组件的排序</li></ol><p>这两处实现都基于相同的拖拽组件：<code>SortableContainer</code> 和 <code>SortableItem</code>，它们封装了 <code>@dnd-kit</code> 库的功能。</p><h3 id="拖拽排序应用组件及架构" tabindex="-1"><code>拖拽排序应用组件及架构</code> <a class="header-anchor" href="#拖拽排序应用组件及架构" aria-label="Permalink to &quot;`拖拽排序应用组件及架构`&quot;">​</a></h3>',5)),(o(),d(l,null,{default:B(()=>[a(A,{id:"mermaid-174",class:"mermaid",graph:"graph%20TB%0A%20%20%20%20subgraph%20%22%E6%8B%96%E6%8B%BD%E6%8E%92%E5%BA%8F%E6%A0%B8%E5%BF%83%E7%BB%84%E4%BB%B6%22%0A%20%20%20%20%20%20%20%20A%5B%22SortableContainer%22%5D%20--%3E%20B%5B%22DndContext%22%5D%0A%20%20%20%20%20%20%20%20A%20--%3E%20C%5B%22SortableContext%22%5D%0A%20%20%20%20%20%20%20%20D%5B%22SortableItem%22%5D%20--%3E%20E%5B%22useSortable%20Hook%22%5D%0A%20%20%20%20end%0A%0A%20%20%20%20subgraph%20%22%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF%22%0A%20%20%20%20%20%20%20%20F%5B%22EditCanvas%20%E7%BC%96%E8%BE%91%E7%94%BB%E5%B8%83%22%5D%20--%3E%20A%0A%20%20%20%20%20%20%20%20G%5B%22Layers%20%E5%9B%BE%E5%B1%82%E9%9D%A2%E6%9D%BF%22%5D%20--%3E%20A%0A%20%20%20%20%20%20%20%20H%5B%22EditToolBar%20%E5%B7%A5%E5%85%B7%E6%A0%8F%22%5D%20--%3E%20I%5B%22moveComponentList%20Action%22%5D%0A%20%20%20%20end%0A%0A%20%20%20%20subgraph%20%22%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%22%0A%20%20%20%20%20%20%20%20J%5B%22Redux%20Store%22%5D%20--%3E%20K%5B%22componentsReducer%22%5D%0A%20%20%20%20%20%20%20%20K%20--%3E%20L%5B%22componentList%20%E7%BB%84%E4%BB%B6%E5%88%97%E8%A1%A8%22%5D%0A%20%20%20%20%20%20%20%20K%20--%3E%20M%5B%22selectedId%20%E9%80%89%E4%B8%AD%E7%BB%84%E4%BB%B6%22%5D%0A%20%20%20%20%20%20%20%20I%20--%3E%20K%0A%20%20%20%20end%0A%0A%20%20%20%20subgraph%20%22%E6%8B%96%E6%8B%BD%E4%BA%8B%E4%BB%B6%E6%B5%81%22%0A%20%20%20%20%20%20%20%20N%5B%22%E7%94%A8%E6%88%B7%E6%8B%96%E6%8B%BD%22%5D%20--%3E%20O%5B%22MouseSensor%20%E6%A3%80%E6%B5%8B%22%5D%0A%20%20%20%20%20%20%20%20O%20--%3E%20P%5B%22handleDragEnd%20%E4%BA%8B%E4%BB%B6%22%5D%0A%20%20%20%20%20%20%20%20P%20--%3E%20Q%5B%22%E8%AE%A1%E7%AE%97%E6%96%B0%E4%BD%8D%E7%BD%AE%22%5D%0A%20%20%20%20%20%20%20%20Q%20--%3E%20R%5B%22onDragEnd%20%E5%9B%9E%E8%B0%83%22%5D%0A%20%20%20%20%20%20%20%20R%20--%3E%20I%0A%20%20%20%20end%0A%0A%20%20%20%20subgraph%20%22dnd-kit%20%E5%BA%93%E4%BE%9D%E8%B5%96%22%0A%20%20%20%20%20%20%20%20S%5B%22%40dnd-kit%2Fcore%22%5D%20--%3E%20B%0A%20%20%20%20%20%20%20%20T%5B%22%40dnd-kit%2Fsortable%22%5D%20--%3E%20C%0A%20%20%20%20%20%20%20%20T%20--%3E%20E%0A%20%20%20%20%20%20%20%20U%5B%22%40dnd-kit%2Futilities%22%5D%20--%3E%20V%5B%22CSS%20Transform%22%5D%0A%20%20%20%20end%0A%0A%20%20%20%20A%20-.-%3E%20F%0A%20%20%20%20A%20-.-%3E%20G%0A%20%20%20%20D%20-.-%3E%20F%0A%20%20%20%20D%20-.-%3E%20G%0A%20%20%20%20V%20--%3E%20D%0A%0A%20%20%20%20style%20A%20fill%3A%23e1f5fe%0A%20%20%20%20style%20D%20fill%3A%23e1f5fe%0A%20%20%20%20style%20K%20fill%3A%23fff3e0%0A%20%20%20%20style%20I%20fill%3A%23f3e5f5%0A"})]),fallback:B(()=>E[5]||(E[5]=[e(" Loading... ")])),_:1})),E[26]||(E[26]=t("h3",{id:"拖拽排序流程图解",tabindex:"-1"},[t("code",null,"拖拽排序流程图解"),e(),t("a",{class:"header-anchor",href:"#拖拽排序流程图解","aria-label":'Permalink to "`拖拽排序流程图解`"'},"​")],-1)),(o(),d(l,null,{default:B(()=>[a(A,{id:"mermaid-178",class:"mermaid",graph:"graph%20TD%3B%0A%20%20%20%201%20--%3E%202%3B%0A%20%20%20%202%20--%3E%203%3B%0A%20%20%20%203%20--%3E%204%3B%0A%20%20%20%204%20--%3E%205%3B%0A%20%20%20%205%20--%3E%206%3B%0A%20%20%20%206%20--%3E%207%3B%0A%20%20%20%207%20--%3E%208%3B%0A%20%20%20%208%20--%3E%209%3B%0A%20%20%20%209%20--%3E%2010%3B%0A%20%20%20%2010%20--%3E%2011%3B%0A%0A%20%20%20%20class%201%2C2%2C3%2C4%2C5%2C6%2C7%2C8%2C9%2C10%2C11%20process%3B%0A%0A%20%20%20%20subgraph%20Legend%0A%20%20%20%20%20%20%20%201%5B%E7%94%A8%E6%88%B7%E6%8B%96%E5%8A%A8%E7%BB%84%E4%BB%B6%5D%0A%20%20%20%20%20%20%20%202%5BMouseSensor%E6%A3%80%E6%B5%8B%E6%8B%96%E5%8A%A8%5D%0A%20%20%20%20%20%20%20%203%5BDndContext%E8%B7%9F%E8%B8%AA%E6%8B%96%E5%8A%A8%E4%BD%8D%E7%BD%AE%5D%0A%20%20%20%20%20%20%20%204%5BSortableContext%E8%AE%A1%E7%AE%97%E6%8E%92%E5%BA%8F%E4%BD%8D%E7%BD%AE%5D%0A%20%20%20%20%20%20%20%205%5BCSS%20Transform%E6%8F%90%E4%BE%9B%E8%A7%86%E8%A7%89%E5%8F%8D%E9%A6%88%5D%0A%20%20%20%20%20%20%20%206%5B%E7%94%A8%E6%88%B7%E9%87%8A%E6%94%BE%E9%BC%A0%E6%A0%87%E6%8C%89%E9%92%AE%5D%0A%20%20%20%20%20%20%20%207%5B%E8%A7%A6%E5%8F%91handleDragEnd%5D%0A%20%20%20%20%20%20%20%208%5B%E8%AE%A1%E7%AE%97%E6%96%B0%E6%97%A7%E7%B4%A2%E5%BC%95%E4%BD%8D%E7%BD%AE%5D%0A%20%20%20%20%20%20%20%209%5Bdispatch%20moveComponentList%20action%5D%0A%20%20%20%20%20%20%20%2010%5BRedux%E4%BD%BF%E7%94%A8arrayMove%E6%9B%B4%E6%96%B0%E7%8A%B6%E6%80%81%5D%0A%20%20%20%20%20%20%20%2011%5B%E7%BB%84%E4%BB%B6%E9%87%8D%E6%96%B0%E6%B8%B2%E6%9F%93%E6%98%BE%E7%A4%BA%E6%96%B0%E9%A1%BA%E5%BA%8F%5D%0A%20%20%20%20end%0A"})]),fallback:B(()=>E[6]||(E[6]=[e(" Loading... ")])),_:1})),E[27]||(E[27]=i('<div class="info custom-block"><p class="custom-block-title"><strong><code>核心拖拽组件实现</code></strong></p><p><strong><code>SortableContainer 组件</code></strong></p><ul><li><p><code>SortableContainer</code> 是拖拽功能的容器组件，负责设置拖拽上下文和处理拖拽事件。</p></li><li><p>该组件使用 <code>MouseSensor</code> 来检测鼠标拖拽行为，并设置了 8 像素的激活约束，这意味着鼠标需要移动超过 8 像素才会触发拖拽操作，避免误触。</p></li><li><p>当拖拽结束时，组件会计算新的位置并通过回调函数通知父组件。</p></li></ul><p><strong><code>SortableItem 组件</code></strong></p><p><code>SortableItem</code> 使单个元素可拖拽，它使用 <code>useSortable</code> hook 获取必要的属性和事件监听器。</p></div><h3 id="拖拽排序数据流图" tabindex="-1"><code>拖拽排序数据流图</code> <a class="header-anchor" href="#拖拽排序数据流图" aria-label="Permalink to &quot;`拖拽排序数据流图`&quot;">​</a></h3>',2)),(o(),d(l,null,{default:B(()=>[a(A,{id:"mermaid-210",class:"mermaid",graph:"sequenceDiagram%0A%20%20%20%20%E7%94%A8%E6%88%B7-%3E%3E%E7%BB%84%E4%BB%B6%E7%95%8C%E9%9D%A2(EditCanvas%2FLayers)%3A%20%E5%BC%80%E5%A7%8B%E6%8B%96%E5%8A%A8%E7%BB%84%E4%BB%B6%0A%20%20%20%20%E7%BB%84%E4%BB%B6%E7%95%8C%E9%9D%A2(EditCanvas%2FLayers)-%3E%3ESortableContainer%3A%20%E8%A7%A6%E5%8F%91%E6%8B%96%E5%8A%A8%E4%BA%8B%E4%BB%B6%0A%20%20%20%20SortableContainer-%3E%3ESortableItem%3A%20%E5%BA%94%E7%94%A8%E6%8B%96%E5%8A%A8%E6%A0%B7%E5%BC%8F%E5%92%8C%E4%BD%8D%E7%BD%AE%0A%20%20%20%20%E7%94%A8%E6%88%B7-%3E%3E%E7%BB%84%E4%BB%B6%E7%95%8C%E9%9D%A2(EditCanvas%2FLayers)%3A%20%E9%87%8A%E6%94%BE%E9%BC%A0%E6%A0%87%E5%AE%8C%E6%88%90%E6%8B%96%E5%8A%A8%0A%20%20%20%20%E7%BB%84%E4%BB%B6%E7%95%8C%E9%9D%A2(EditCanvas%2FLayers)-%3E%3ESortableContainer%3A%20%E8%A7%A6%E5%8F%91%20onDragEnd%20%E4%BA%8B%E4%BB%B6%0A%20%20%20%20SortableContainer-%3E%3E%E7%BB%84%E4%BB%B6%E7%95%8C%E9%9D%A2(EditCanvas%2FLayers)%3A%20%E8%B0%83%E7%94%A8%20handleDragEnd(oldIndex%2C%20newIndex)%0A%20%20%20%20%E7%BB%84%E4%BB%B6%E7%95%8C%E9%9D%A2(EditCanvas%2FLayers)-%3E%3ERedux%20Store%3A%20dispatch%20moveComponentList%20action%0A%20%20%20%20Redux%20Store-%3E%3ERedux%20Store%3A%20%E4%BD%BF%E7%94%A8%20arrayMove%20%E9%87%8D%E6%8E%92%E7%BB%84%E4%BB%B6%E5%88%97%E8%A1%A8%0A%20%20%20%20Redux%20Store-%3E%3E%E7%BB%84%E4%BB%B6%E7%95%8C%E9%9D%A2(EditCanvas%2FLayers)%3A%20%E6%9B%B4%E6%96%B0%E7%8A%B6%E6%80%81%E8%A7%A6%E5%8F%91%E9%87%8D%E6%96%B0%E6%B8%B2%E6%9F%93%0A%20%20%20%20%E7%BB%84%E4%BB%B6%E7%95%8C%E9%9D%A2(EditCanvas%2FLayers)-%3E%3E%E7%94%A8%E6%88%B7%3A%20%E6%98%BE%E7%A4%BA%E6%96%B0%E7%9A%84%E7%BB%84%E4%BB%B6%E9%A1%BA%E5%BA%8F%0A"})]),fallback:B(()=>E[7]||(E[7]=[e(" Loading... ")])),_:1})),E[28]||(E[28]=t("h2",{id:"编辑工具栏",tabindex:"-1"},[t("code",null,"编辑工具栏"),e(),t("a",{class:"header-anchor",href:"#编辑工具栏","aria-label":'Permalink to "`编辑工具栏`"'},"​")],-1)),E[29]||(E[29]=t("p",null,[e("编辑头部提供了"),t("code",null,"管理问卷"),e("和访问"),t("code",null,"编辑工具"),e("的控件。")],-1)),(o(),d(l,null,{default:B(()=>[a(A,{id:"mermaid-217",class:"mermaid",graph:"graph%20TD%3B%0A%20%20%20%201%5B%E7%BC%96%E8%BE%91%E5%A4%B4%E9%83%A8%5D%20--%3E%202%5B%E5%A4%B4%E9%83%A8%E7%BB%84%E4%BB%B6%5D%3B%0A%20%20%20%202%20--%3E%203%5B%E5%B7%A6%E4%BE%A7%E9%83%A8%E5%88%86%5D%3B%0A%20%20%20%202%20--%3E%204%5B%E4%B8%BB%E8%A6%81%E9%83%A8%E5%88%86%5D%3B%0A%20%20%20%202%20--%3E%205%5B%E5%8F%B3%E4%BE%A7%E9%83%A8%E5%88%86%5D%3B%0A%20%20%20%203%20--%3E%206%5B%E8%BF%94%E5%9B%9E%E6%8C%89%E9%92%AE%5D%3B%0A%20%20%20%203%20--%3E%207%5B%E6%A0%87%E9%A2%98%E7%BB%84%E4%BB%B6%5D%3B%0A%20%20%20%207%20--%3E%208%5B%E6%A0%87%E9%A2%98%E6%98%BE%E7%A4%BA%5D%3B%0A%20%20%20%207%20--%3E%209%5B%E7%BC%96%E8%BE%91%E6%A8%A1%E5%BC%8F%5D%3B%0A%20%20%20%209%20--%3E%2010%5Bdispatch%20changeTitle%5D%3B%0A%20%20%20%204%20--%3E%2011%5B%E7%BC%96%E8%BE%91%E5%B7%A5%E5%85%B7%E6%A0%8F%5D%3B%0A%20%20%20%205%20--%3E%2012%5B%E4%BF%9D%E5%AD%98%E6%8C%89%E9%92%AE%5D%3B%0A%20%20%20%205%20--%3E%2013%5B%E5%8F%91%E5%B8%83%E6%8C%89%E9%92%AE%5D%3B%0A%20%20%20%2012%20--%3E%2014%5B%E6%89%8B%E5%8A%A8%E4%BF%9D%E5%AD%98%5D%3B%0A%20%20%20%2012%20--%3E%2015%5B%E8%87%AA%E5%8A%A8%E4%BF%9D%E5%AD%98%5D%3B%0A%20%20%20%2012%20--%3E%2016%5B%E9%94%AE%E7%9B%98%E5%BF%AB%E6%8D%B7%E9%94%AE%5D%3B%0A%20%20%20%2014%20--%3E%2017%5BupdateQuestionService%5D%3B%0A%20%20%20%2015%20--%3E%2017%3B%0A%20%20%20%2016%20--%3E%2017%3B%0A%20%20%20%2013%20--%3E%2018%5B%E5%8F%91%E5%B8%83%E8%AF%B7%E6%B1%82%5D%3B%0A%20%20%20%2018%20--%3E%2019%5BupdateQuestionService%5D%3B%0A%20%20%20%2019%20--%3E%2020%5B%E5%AF%BC%E8%88%AA%E5%88%B0%E7%BB%9F%E8%AE%A1%E9%A1%B5%E9%9D%A2%5D%3B%0A"})]),fallback:B(()=>E[8]||(E[8]=[e(" Loading... ")])),_:1})),E[30]||(E[30]=i('<div class="tip custom-block"><p class="custom-block-title"><strong><code>主要功能</code></strong></p><ol><li><strong>标题编辑</strong><ul><li><code>显示</code>当前问卷标题</li><li>允许<code>内联编</code>辑标题</li><li>在 Redux store 中<code>更新</code>标题</li></ul></li><li><strong>保存功能</strong><ul><li><code>手动</code>保存按钮</li><li>2 秒防抖的<code>自动保存</code></li><li>键盘<code>快捷键</code>（Ctrl+S/Cmd+S）</li><li>保存过程中的<code>视觉加载</code>指示器</li></ul></li><li><strong>发布功能</strong><ul><li>带有<code>加载状态</code>的发布按钮</li><li>已发布时<code>禁用</code></li><li>发布后<code>重定向</code>到统计页面</li></ul></li><li><strong>导航</strong><ul><li>返回上一页的返回按钮</li></ul></li></ol></div><h3 id="工具栏组件" tabindex="-1"><code>工具栏组件</code> <a class="header-anchor" href="#工具栏组件" aria-label="Permalink to &quot;`工具栏组件`&quot;">​</a></h3><blockquote><p>工具栏提供了各种组件操作按钮：</p></blockquote><table tabindex="0"><thead><tr><th>按钮</th><th>操作</th><th>Redux 操作</th><th>描述</th></tr></thead><tbody><tr><td>删除</td><td>deleteComponent</td><td>removeSelectedComponent</td><td>移除选定的组件</td></tr><tr><td>隐藏</td><td>changeHidden</td><td>changeComponentHidden</td><td>使选定的组件不可见</td></tr><tr><td>锁定</td><td>toggleLocked</td><td>toggleComponentLocked</td><td>锁定/解锁选定的组件</td></tr><tr><td>复制</td><td>copy</td><td>copySelectedComponent</td><td>复制选定的组件</td></tr><tr><td>粘贴</td><td>paste</td><td>pasteCopiedComponent</td><td>粘贴复制的组件</td></tr><tr><td>上移</td><td>moveUp</td><td>moveComponentList</td><td>将组件在列表中向上移动</td></tr><tr><td>下移</td><td>moveDown</td><td>moveComponentList</td><td>将组件在列表中向下移动</td></tr><tr><td>撤销</td><td>undo</td><td>UndoActionCreators.undo</td><td>撤销上一个操作</td></tr><tr><td>重做</td><td>redo</td><td>UndoActionCreators.redo</td><td>重做上一个撤销的操作</td></tr></tbody></table><h2 id="键盘快捷键" tabindex="-1"><code>键盘快捷键</code> <a class="header-anchor" href="#键盘快捷键" aria-label="Permalink to &quot;`键盘快捷键`&quot;">​</a></h2><blockquote><p>问卷编辑器可以使用快捷键操作编辑画布中的问卷组件：</p></blockquote><table tabindex="0"><thead><tr><th>快捷键</th><th>操作</th><th>描述</th></tr></thead><tbody><tr><td>Delete / Backspace</td><td>删除组件</td><td>删除当前选中的组件</td></tr><tr><td>Ctrl+C / Cmd+C</td><td>复制组件</td><td>复制当前选中的组件</td></tr><tr><td>Ctrl+V / Cmd+V</td><td>粘贴组件</td><td>粘贴之前复制的组件</td></tr><tr><td>上箭头</td><td>选择上一个</td><td>选择当前组件上方的组件</td></tr><tr><td>下箭头</td><td>选择下一个</td><td>选择当前组件下方的组件</td></tr><tr><td>Ctrl+Z / Cmd+Z</td><td>撤销</td><td>撤销上一个执行的操作</td></tr><tr><td>Ctrl+Shift+Z / Cmd+Shift+Z</td><td>重做</td><td>恢复上一个撤销的操作</td></tr><tr><td>Ctrl+S / Cmd+S</td><td>保存</td><td>保存问卷的当前状态</td></tr></tbody></table><ul><li><p>这些快捷键仅在适当的元素获得焦点时才会激活。具体来说，当用户在输入字段中输入文本时，它们不会干扰正常的文本输入操作。</p></li><li><p>保存快捷键会自动阻止浏览器的默认保存行为，而是触发应用程序的保存逻辑。</p></li></ul><h3 id="实现架构" tabindex="-1"><code>实现架构</code> <a class="header-anchor" href="#实现架构" aria-label="Permalink to &quot;`实现架构`&quot;">​</a></h3><p>键盘快捷键系统与 <code>Redux</code> 状态管理集成，并使用 ahooks 库中的 <code>useKeyPress</code> 钩子进行按键绑定。</p>',10)),(o(),d(l,null,{default:B(()=>[a(A,{id:"mermaid-590",class:"mermaid",graph:"flowchart%20TD%0A%20%20%20%20A%5B%E6%8C%89%E9%94%AE%E4%BA%8B%E4%BB%B6%5D%20--%3E%20B%5BuseKeyPress%20%E9%92%A9%E5%AD%90%5D%0A%20%20%20%20B%20--%3E%20C%5BisValidActiveElement%20%E6%A3%80%E6%9F%A5%5D%0A%20%20%20%20C%20--%3E%7C%E6%9C%89%E6%95%88%E5%85%83%E7%B4%A0%7C%20D%5B%E5%88%86%E5%8F%91%20Redux%20Action%5D%0A%20%20%20%20C%20--%3E%7C%E6%97%A0%E6%95%88%E5%85%83%E7%B4%A0%7C%20E%5B%E6%97%A0%E6%93%8D%E4%BD%9C%EF%BC%88%E9%BB%98%E8%AE%A4%E8%A1%8C%E4%B8%BA%EF%BC%89%5D%0A%20%20%20%20D%20--%3E%20F%5BRedux%20Store%5D%0A%20%20%20%20F%20--%3E%20G%5B%E7%BB%84%E4%BB%B6%E6%9B%B4%E6%96%B0%5D%0A"})]),fallback:B(()=>E[9]||(E[9]=[e(" Loading... ")])),_:1})),E[31]||(E[31]=i('<h3 id="redux-action-映射" tabindex="-1"><code>Redux Action 映射</code> <a class="header-anchor" href="#redux-action-映射" aria-label="Permalink to &quot;`Redux Action 映射`&quot;">​</a></h3><blockquote><p>每个键盘快捷键都映射到一个特定的 Redux action，用于修改应用程序状态。</p></blockquote><table tabindex="0"><thead><tr><th>键盘快捷键</th><th>Redux Actions</th></tr></thead><tbody><tr><td>Delete/Backspace</td><td>removeSelectedComponent()</td></tr><tr><td>Ctrl+C / Cmd+C</td><td>copySelectedComponent()</td></tr><tr><td>Ctrl+V / Cmd+V</td><td>pasteCopiedComponent()</td></tr><tr><td>上箭头</td><td>selectPrevComponent()</td></tr><tr><td>下箭头</td><td>selectNextComponent()</td></tr><tr><td>Ctrl+Z / Cmd+Z</td><td>UndoActionCreators.undo()</td></tr><tr><td>Ctrl+Shift+Z / Cmd+Shift+Z</td><td>UndoActionCreators.redo()</td></tr><tr><td>Ctrl+S / Cmd+S</td><td>updateQuestionService()</td></tr></tbody></table><h3 id="有效元素检查" tabindex="-1"><code>有效元素检查</code> <a class="header-anchor" href="#有效元素检查" aria-label="Permalink to &quot;`有效元素检查`&quot;">​</a></h3><p>触发快捷键操作时包含一个特殊检查，以确保键盘快捷键仅在<code>适当时</code>触发。例如，不在用户在输入字段中输入时触发。这由 <code>isValidActiveElement</code> 函数处理。</p>',5)),(o(),d(l,null,{default:B(()=>[a(A,{id:"mermaid-683",class:"mermaid",graph:"flowchart%20TD%0A%20%20%20%20A%5B%E6%8C%89%E9%94%AE%5D%20--%3E%20B%7BisValidActiveElement%3F%7D%0A%20%20%20%20B%20--%3E%7C%E6%98%AF%7C%20C%5B%E5%88%86%E5%8F%91%20Redux%20Action%5D%0A%20%20%20%20B%20--%3E%7C%E5%90%A6%7C%20D%5B%E4%BD%BF%E7%94%A8%E9%BB%98%E8%AE%A4%E6%B5%8F%E8%A7%88%E5%99%A8%E8%A1%8C%E4%B8%BA%5D%0A%20%20%20%20B%20--%3E%20E%7BisValidActiveElement%20%E9%80%BB%E8%BE%91%7D%0A%20%20%20%20E%20--%3EF%7B%E6%98%AF%20document.body%3F%7D%0A%20%20%20%20F%20--%3E%7C%E6%98%AF%7C%20G%5B%E8%BF%94%E5%9B%9E%20true%5D%0A%20%20%20%20F%20--%3E%7C%E5%90%A6%7C%20H%7B4.%E6%98%AF%20dnd-kit%20%E5%85%83%E7%B4%A0%3F%7D%0A%20%20%20%20H%20--%3E%7C%E6%98%AF%7C%20G%0A%20%20%20%20H%20--%3E%7C%E5%90%A6%7C%20I%5B%E8%BF%94%E5%9B%9E%20false%5D%0A"})]),fallback:B(()=>E[10]||(E[10]=[e(" Loading... ")])),_:1})),E[32]||(E[32]=t("h3",{id:"与编辑器组件的集成",tabindex:"-1"},[t("code",null,"与编辑器组件的集成"),e(),t("a",{class:"header-anchor",href:"#与编辑器组件的集成","aria-label":'Permalink to "`与编辑器组件的集成`"'},"​")],-1)),E[33]||(E[33]=t("blockquote",null,[t("p",null,"键盘快捷键通过自定义钩子与编辑器界面组件集成。")],-1)),(o(),d(l,null,{default:B(()=>[a(A,{id:"mermaid-692",class:"mermaid",graph:"graph%20TD%0A%20%20%20%20subgraph%20%E5%BF%AB%E6%8D%B7%E9%94%AE%E9%92%A9%E5%AD%90%0A%20%20%20%20%20%20%20%20A1%5BuseBindCanvasKeyPress%5D%0A%20%20%20%20%20%20%20%20A2%5BuseKeyPress%EF%BC%88%E4%BF%9D%E5%AD%98%EF%BC%89%5D%0A%20%20%20%20end%0A%0A%20%20%20%20subgraph%20%E7%BC%96%E8%BE%91%E5%99%A8%E7%95%8C%E9%9D%A2%0A%20%20%20%20%20%20%20%20B1%5B%E7%BC%96%E8%BE%91%E9%A1%B5%E9%9D%A2%5D%0A%20%20%20%20%20%20%20%20B2%5B%E7%BC%96%E8%BE%91%E7%94%BB%E5%B8%83%5D%0A%20%20%20%20%20%20%20%20B3%5B%E7%BC%96%E8%BE%91%E5%A4%B4%E9%83%A8%5D%0A%20%20%20%20%20%20%20%20B4%5B%E7%BC%96%E8%BE%91%E5%B7%A5%E5%85%B7%E6%A0%8F%5D%0A%20%20%20%20end%0A%0A%20%20%20%20A1%20--%3E%20C1%5BRedux%20Actions%5D%0A%20%20%20%20A2%20--%3E%20C2%5B%E4%BF%9D%E5%AD%98%E6%93%8D%E4%BD%9C%5D%0A%0A%0A%20%20%20%20B1%20--%3E%20B2%0A%20%20%20%20B1%20--%3E%20B3%20--%3E%20B4%0A%0A%20%20%20%20B2%20--%3E%20A1%0A%20%20%20%20B3%20--%3E%20A2%0A%0A"})]),fallback:B(()=>E[11]||(E[11]=[e(" Loading... ")])),_:1})),E[34]||(E[34]=i('<div class="info custom-block"><p class="custom-block-title">技术说明</p><ol><li>应用程序使用 ahooks 库中的 <code>useKeyPress</code> 钩子处理键盘事件。</li><li>对于复杂的按键组合（如 Ctrl+Shift+Z），使用 <code>exactMatch</code> 选项确保仅在完全匹配时触发。</li><li>撤销/重做功能使用 redux-undo 库实现。</li></ol></div><h2 id="属性及页面设置面板" tabindex="-1"><code>属性及页面设置面板</code> <a class="header-anchor" href="#属性及页面设置面板" aria-label="Permalink to &quot;`属性及页面设置面板`&quot;">​</a></h2><p>右侧的属性及页面设置面板是问卷编辑器界面的一个关键组成部分，用于编辑<code>当前选中组件</code>的<code>属性</code>或整个<code>问卷的页面设置</code>。它使用标签页（Tabs）组件来切换不同的功能视图。</p>',3)),(o(),d(l,null,{default:B(()=>[a(A,{id:"mermaid-718",class:"mermaid",graph:"graph%20TD%0A%20%20%20%20A%5B%E5%8F%B3%E4%BE%A7%E9%9D%A2%E6%9D%BF%20RightPanel%5D%20--%3E%20B%5B%E5%B1%9E%E6%80%A7%E6%A0%87%E7%AD%BE%E9%A1%B5%20PROPS_KEY%5D%0A%20%20%20%20A%20--%3E%20C%5B%E8%AE%BE%E7%BD%AE%E6%A0%87%E7%AD%BE%E9%A1%B5%20SETTING_KEY%5D%0A%0A%20%20%20%20B%20--%3E%20D%5BComponentsProp%20%E7%BB%84%E4%BB%B6%E5%B1%9E%E6%80%A7%E7%BC%96%E8%BE%91%E5%99%A8%5D%0A%20%20%20%20D%20--%3E%20E%5B%E6%A0%B9%E6%8D%AE%E9%80%89%E4%B8%AD%E7%BB%84%E4%BB%B6%E7%B1%BB%E5%9E%8B%E6%B8%B2%E6%9F%93%E5%AF%B9%E5%BA%94%E7%9A%84%E5%B1%9E%E6%80%A7%E7%BC%96%E8%BE%91%E5%99%A8%5D%0A%0A%20%20%20%20C%20--%3E%20F%5BPageSetting%20%E9%A1%B5%E9%9D%A2%E8%AE%BE%E7%BD%AE%5D%0A%20%20%20%20F%20--%3E%20G%5B%E7%BC%96%E8%BE%91%E9%97%AE%E5%8D%B7%E6%A0%87%E9%A2%98%E3%80%81%E6%8F%8F%E8%BF%B0%3Cbr%2F%3ECSS%20%E5%92%8C%20JS%20%E4%BB%A3%E7%A0%81%E7%AD%89%5D%0A%0A"})]),fallback:B(()=>E[12]||(E[12]=[e(" Loading... ")])),_:1})),E[35]||(E[35]=i('<div class="info custom-block"><p class="custom-block-title">右侧面板会根据当前是否有选中的组件来自动切换显示的标签页：</p><ul><li>当没有选中组件时，自动切换到&quot;页面设置&quot;标签页</li><li>当选中了组件时，自动切换到&quot;属性&quot;标签页</li></ul></div><h3 id="组件属性编辑器" tabindex="-1"><code>组件属性编辑器</code> <a class="header-anchor" href="#组件属性编辑器" aria-label="Permalink to &quot;`组件属性编辑器`&quot;">​</a></h3><div class="info custom-block"><p class="custom-block-title">当选中一个组件时，右侧面板的&quot;属性&quot;标签页会显示<code>该组件类型</code>对应的<code>属性</code>编辑器。不同类型的组件有不同的属性编辑器，例如,<code>多选框</code>组件的属性编辑器允许用户编辑以下内容：</p><ul><li>标题文本</li><li>选项列表（可添加、删除选项）</li><li>布局方式（水平或垂直排列）</li></ul></div><h3 id="页面设置" tabindex="-1"><code>页面设置</code> <a class="header-anchor" href="#页面设置" aria-label="Permalink to &quot;`页面设置`&quot;">​</a></h3><div class="info custom-block"><p class="custom-block-title">当切换到&quot;页面设置&quot;标签页时，用户可以编辑整个问卷的元数据，如：</p><ul><li>问卷标题</li><li>问卷描述</li><li>自定义 CSS</li><li>自定义 JavaScript</li></ul></div><h3 id="数据流" tabindex="-1"><code>数据流</code> <a class="header-anchor" href="#数据流" aria-label="Permalink to &quot;`数据流`&quot;">​</a></h3><div class="tip custom-block"><p class="custom-block-title">右侧面板通过 Redux 状态管理与应用的其他部分进行通信：</p><ol><li>从 Redux store 获取<code>当前选中</code>的组件 ID</li><li>根据选中的组件 ID 决定显示哪个组件的<code>属性编辑组件</code></li><li>当用户在属性编辑器中修改属性时，派发 Redux actions <code>更新组件状态</code></li><li>当用户在页面设置中修改问卷元数据时，派发 Redux actions <code>更新页面信息</code>状态</li></ol></div>',7)),(o(),d(l,null,{default:B(()=>[a(A,{id:"mermaid-809",class:"mermaid",graph:"sequenceDiagram%0A%20%20%20%20participant%20User%20as%20%E7%94%A8%E6%88%B7%0A%20%20%20%20participant%20Panel%20as%20%E5%8F%B3%E4%BE%A7%E9%9D%A2%E6%9D%BF%0A%20%20%20%20participant%20Store%20as%20Redux%20Store%0A%20%20%20%20participant%20Canvas%20as%20%E7%94%BB%E5%B8%83%0A%0A%20%20%20%20User-%3E%3EPanel%3A%20%E7%BC%96%E8%BE%91%E7%BB%84%E4%BB%B6%E5%B1%9E%E6%80%A7%0A%20%20%20%20Panel-%3E%3EStore%3A%20%E6%B4%BE%E5%8F%91%20changeComponentProps%20action%0A%20%20%20%20Store-%3E%3ECanvas%3A%20%E7%8A%B6%E6%80%81%E6%9B%B4%E6%96%B0%0A%20%20%20%20Canvas-%3E%3EUser%3A%20%E6%98%BE%E7%A4%BA%E6%9B%B4%E6%96%B0%E5%90%8E%E7%9A%84%E7%BB%84%E4%BB%B6%0A%0A%0A%20%20%20%20User-%3E%3EPanel%3A%20%E7%BC%96%E8%BE%91%E9%A1%B5%E9%9D%A2%E8%AE%BE%E7%BD%AE%0A%20%20%20%20Panel-%3E%3EStore%3A%20%E6%B4%BE%E5%8F%91%20resetPageInfo%20action%0A%20%20%20%20Store-%3E%3ECanvas%3A%20%E7%8A%B6%E6%80%81%E6%9B%B4%E6%96%B0%0A%20%20%20%20Canvas-%3E%3EUser%3A%20%E6%98%BE%E7%A4%BA%E6%9B%B4%E6%96%B0%E5%90%8E%E7%9A%84%E9%A1%B5%E9%9D%A2%0A"})]),fallback:B(()=>E[13]||(E[13]=[e(" Loading... ")])),_:1})),E[36]||(E[36]=i('<h2 id="与状态管理的集成" tabindex="-1"><code>与状态管理的集成</code> <a class="header-anchor" href="#与状态管理的集成" aria-label="Permalink to &quot;`与状态管理的集成`&quot;">​</a></h2><div class="info custom-block"><p class="custom-block-title">问卷编辑器与 <code>Redux</code> 紧密<code>集成</code>进行状态管理，主要通过两个 reducer：</p><ol><li><strong><code>componentsReducer</code></strong>：管理组件列表、选中的组件和组件操作</li><li><strong><code>pageInfoReducer</code></strong>：管理元数据，如标题、描述、CSS、JS 和发布状态</li></ol></div>',2)),(o(),d(l,null,{default:B(()=>[a(A,{id:"mermaid-827",class:"mermaid",graph:"graph%20TD%0A%20%20%20%20A%5B%22%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%E9%9B%86%E6%88%90%22%5D%20--%3E%20B%5B%22%E7%BC%96%E8%BE%91%E5%99%A8%E7%BB%84%E4%BB%B6%22%5D%0A%20%20%20%20B%20--%3E%20C%5B%22useDispatch%22%5D%0A%20%20%20%20B%20--%3E%20D%5B%22useSelector%E9%92%A9%E5%AD%90%22%5D%0A%20%20%20%20C%20--%3E%20E%5B%22Redux%E6%93%8D%E4%BD%9C%22%5D%0A%20%20%20%20D%20--%3E%20F%5B%22useGetComponentInfo%22%5D%0A%20%20%20%20D%20--%3E%20G%5B%22useGetPageInfo%22%5D%0A%20%20%20%20E%20--%3E%20H%5B%22componentsReducer%22%5D%0A%20%20%20%20E%20--%3E%20I%5B%22pageInfoReducer%22%5D%0A%20%20%20%20H%20--%3E%20J%5B%22componentList%22%5D%0A%20%20%20%20H%20--%3E%20K%5B%22selectedId%22%5D%0A%20%20%20%20H%20--%3E%20L%5B%22copiedComponent%22%5D%0A%20%20%20%20I%20--%3E%20M%5B%22title%22%5D%0A%20%20%20%20I%20--%3E%20N%5B%22desc%22%5D%0A%20%20%20%20I%20--%3E%20O%5B%22css%2Fjs%22%5D%0A%20%20%20%20I%20--%3E%20P%5B%22isPublished%22%5D%0A%20%20%20%20Q%5B%22%E7%94%A8%E6%88%B7%E6%93%8D%E4%BD%9C%22%5D%20--%3E%20S%5B%22changeSelectedId%22%5D%0A%20%20%20%20Q%20--%3E%20T%5B%22moveComponentList%22%5D%0A%20%20%20%20Q%20--%3E%20U%5B%22changeTitle%22%5D%0A%20%20%20%20Q%20--%3E%20V%5B%22%E5%85%B6%E4%BB%96%E6%93%8D%E4%BD%9C%22%5D%0A"})]),fallback:B(()=>E[14]||(E[14]=[e(" Loading... ")])),_:1})),E[37]||(E[37]=t("h2",{id:"保存和发布功能",tabindex:"-1"},[t("code",null,"保存和发布功能"),e(),t("a",{class:"header-anchor",href:"#保存和发布功能","aria-label":'Permalink to "`保存和发布功能`"'},"​")],-1)),t("div",D,[E[16]||(E[16]=i('<p class="custom-block-title">编辑器提供了<code>多种保存</code>问卷数据和发布完成问卷的方式。</p><h3 id="保存机制" tabindex="-1"><code>保存机制</code> <a class="header-anchor" href="#保存机制" aria-label="Permalink to &quot;`保存机制`&quot;">​</a></h3><ol><li><strong>手动保存</strong>：用户点击保存按钮</li><li><strong>自动保存</strong>：问卷数据更改时触发（2 秒防抖）</li><li><strong>键盘快捷键</strong>：Ctrl+S / Cmd+S</li></ol>',3)),(o(),d(l,null,{default:B(()=>[a(A,{id:"mermaid-852",class:"mermaid",graph:"flowchart%20LR%0A%0A%20%20%20%201%5B%22%E7%94%A8%E6%88%B7%E7%BC%96%E8%BE%91%22%5D%20--%3E%202%5B%22useDebounceEffect%22%5D%20--%3E%203%5B%222000ms%E5%BB%B6%E8%BF%9F%22%5D%20--%3E%204%5B%22%E4%BF%9D%E5%AD%98%E6%93%8D%E4%BD%9C%22%5D%20--%3E%205%5B%22updateQuestionService()%22%5D%0A%20%20%20%206%5B%22Ctrl%2BS%2FCmd%2BS%22%5D%20--%3E%207%5B%22%E6%89%8B%E5%8A%A8%E4%BF%9D%E5%AD%98%22%5D%20--%3E%208%5B%22500ms%E9%98%B2%E6%8A%96%22%5D%20--%3E%204%5B%22%E4%BF%9D%E5%AD%98%E6%93%8D%E4%BD%9C%22%5D%0A"})]),fallback:B(()=>E[15]||(E[15]=[e(" Loading... ")])),_:1})),E[17]||(E[17]=i('<p>所有保存机制都使用 <code>updateQuestionService</code> 函数将数据发送到后端。</p><h3 id="发布" tabindex="-1"><code>发布</code> <a class="header-anchor" href="#发布" aria-label="Permalink to &quot;`发布`&quot;">​</a></h3><p>发布将问卷设置为已发布状态，并使其可供用户填写：</p><ol><li>将 <code>isPublished</code> 标志更改为 <code>true</code></li><li>将所有当前数据保存到后端</li><li>成功发布后导航到统计页面</li></ol>',4))]),E[38]||(E[38]=i('<h2 id="用户交互模式" tabindex="-1"><code>用户交互模式</code> <a class="header-anchor" href="#用户交互模式" aria-label="Permalink to &quot;`用户交互模式`&quot;">​</a></h2><div class="info custom-block"><p class="custom-block-title">问卷编辑器支持多种交互模式：</p><ol><li><strong>选择</strong>：点击选择组件，点击画布清除选择</li><li><strong>编辑属性</strong>：选择组件以在右侧面板中编辑其属性</li><li><strong>重新排序</strong>：拖放重新排序组件</li><li><strong>键盘导航</strong>：常用操作的键盘快捷键</li><li><strong>内联编辑</strong>：直接编辑问卷标题</li></ol></div><h2 id="相关系统" tabindex="-1"><code>相关系统</code> <a class="header-anchor" href="#相关系统" aria-label="Permalink to &quot;`相关系统`&quot;">​</a></h2><div class="info custom-block"><p class="custom-block-title">问卷编辑器与多个其他系统交互：</p><ol><li><strong>组件库</strong> - <code>提供</code>可添加到画布的<code>组件</code>类型</li><li><strong>状态管理</strong> - 用于<code>管理编辑器状态</code>的 Redux store</li><li><strong>问卷服务</strong> - 用于<code>加载和保存</code>问卷数据的 <code>API</code> 服务</li><li><strong>拖放</strong> - 用于重新<code>排序</code>的 <code>SortableContainer</code> 和 <code>SortableItem</code> 组件</li></ol></div>',4))])}const g=r(c,[["render",u]]);export{S as __pageData,g as default};
